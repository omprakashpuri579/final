<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Om.Admin â€” Portfolio Control Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,400&family=Outfit:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root {
  --navy:       #1a1e26;
  --navy-mid:   #22272f;
  --navy-light: #2c3340;
  --navy-hover: #313847;
  --blue:       #6495ED;
  --blue-wash:  #7aaaf0;
  --blue-pale:  #bdd0f5;
  --blue-dim:   rgba(100,149,237,0.12);
  --gold:       #FF6F61;
  --gold-light: #ff9088;
  --white:      #f0f0f0;
  --white-pure: #f7f7f7;
  --muted:      #D3D3D3;
  --border:     rgba(211,211,211,0.10);
  --border-hi:  rgba(100,149,237,0.22);
  --green:      #4ade80;
  --red:        #f87171;
  --amber:      #fbbf24;
  --mono:       'JetBrains Mono', monospace;
  --display:    'Playfair Display', serif;
  --body:       'Outfit', sans-serif;
  --sidebar-w:  250px;
  --topbar-h:   64px;
}
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }
body { font-family:var(--body); background:var(--navy); color:var(--white); min-height:100vh; display:flex; overflow-x:hidden; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOCK SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.lock-screen {
  position:fixed; inset:0; background:var(--navy); z-index:9999;
  display:flex; align-items:center; justify-content:center;
}
.lock-screen.hidden { display:none; }
.lock-bg {
  position:absolute; inset:0; pointer-events:none;
  background: radial-gradient(ellipse at 60% 40%, rgba(100,149,237,0.08) 0%, transparent 60%),
              radial-gradient(ellipse at 20% 80%, rgba(255,111,97,0.05) 0%, transparent 50%);
}
.lock-grid {
  position:absolute; inset:0; pointer-events:none;
  background-image: linear-gradient(rgba(120,180,220,0.025) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(120,180,220,0.025) 1px, transparent 1px);
  background-size:60px 60px;
}
.lock-box { text-align:center; width:380px; position:relative; z-index:2; animation:fadeUp .6s ease; }
.lock-logo { font-family:var(--display); font-size:32px; font-weight:900; color:var(--white-pure); margin-bottom:6px; }
.lock-logo em { color:var(--blue-wash); font-style:italic; }
.lock-tagline { font-size:10px; letter-spacing:.26em; text-transform:uppercase; color:rgba(120,180,220,0.35); margin-bottom:44px; }
.lock-card { background:var(--navy-mid); border:1px solid var(--border); padding:36px 32px; }
.lock-label { font-size:9px; letter-spacing:.22em; text-transform:uppercase; color:var(--gold); margin-bottom:10px; text-align:left; }
.lock-input {
  width:100%; background:var(--navy); border:1px solid var(--border); color:var(--white-pure);
  padding:14px 18px; font-family:var(--body); font-size:15px; letter-spacing:.2em;
  text-align:center; outline:none; border-radius:2px; transition:border-color .2s;
  margin-bottom:6px;
}
.lock-input:focus { border-color:var(--border-hi); }
.lock-error { font-size:12px; color:var(--red); min-height:20px; margin-bottom:16px; text-align:left; }
.lock-btn {
  width:100%; padding:14px; background:linear-gradient(135deg,var(--blue),var(--blue-wash));
  color:white; border:none; font-family:var(--body); font-size:11px; font-weight:600;
  letter-spacing:.18em; text-transform:uppercase; cursor:pointer; border-radius:2px;
  transition:transform .2s, box-shadow .2s;
}
.lock-btn:hover { transform:translateY(-1px); box-shadow:0 8px 28px rgba(100,149,237,0.4); }
.lock-hint { font-size:10px; color:rgba(120,180,220,0.22); margin-top:18px; }
@keyframes fadeUp { from{opacity:0;transform:translateY(24px)} to{opacity:1;transform:translateY(0)} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIDEBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sidebar {
  width:var(--sidebar-w); min-height:100vh;
  background:var(--navy-mid); border-right:1px solid var(--border);
  display:flex; flex-direction:column; position:fixed; top:0; left:0; z-index:100;
  transition:width .3s;
}
.sidebar.collapsed { width:60px; }
.sidebar-logo {
  padding:24px 22px 20px; border-bottom:1px solid var(--border);
  display:flex; align-items:center; gap:12px; overflow:hidden;
}
.sidebar-logo-icon {
  width:36px; height:36px; background:linear-gradient(135deg,var(--blue),var(--blue-wash));
  border-radius:6px; display:flex; align-items:center; justify-content:center;
  font-family:var(--display); font-weight:900; font-size:16px; color:white; flex-shrink:0;
}
.sidebar-logo-text { overflow:hidden; white-space:nowrap; }
.sidebar-logo-name { font-family:var(--display); font-size:17px; font-weight:700; color:var(--white-pure); }
.sidebar-logo-name em { color:var(--blue-wash); font-style:italic; }
.sidebar-logo-sub { font-size:9px; letter-spacing:.2em; text-transform:uppercase; color:rgba(120,180,220,0.3); margin-top:2px; }
.sidebar-toggle {
  margin-left:auto; width:28px; height:28px; border:1px solid var(--border); background:none;
  cursor:pointer; color:rgba(120,180,220,0.35); font-size:12px; border-radius:2px;
  display:flex; align-items:center; justify-content:center; transition:all .2s; flex-shrink:0;
}
.sidebar-toggle:hover { color:var(--white-pure); border-color:var(--border-hi); }

.sidebar-nav { padding:16px 0; flex:1; overflow-y:auto; overflow-x:hidden; }
.nav-section {
  font-size:8px; letter-spacing:.28em; text-transform:uppercase;
  color:rgba(120,180,220,0.25); padding:14px 22px 6px; white-space:nowrap; overflow:hidden;
}
.sidebar.collapsed .nav-section { opacity:0; }
.nav-item {
  display:flex; align-items:center; gap:12px; padding:10px 22px;
  font-size:13px; color:rgba(211,211,211,0.55); cursor:pointer;
  transition:all .2s; border-left:2px solid transparent; white-space:nowrap; overflow:hidden;
  text-decoration:none; position:relative;
}
.nav-item:hover { color:var(--white-pure); background:rgba(120,180,220,0.05); }
.nav-item.active { color:var(--blue-pale); background:rgba(100,149,237,0.08); border-left-color:var(--blue); }
.nav-icon { font-size:16px; width:22px; text-align:center; flex-shrink:0; }
.nav-label { overflow:hidden; white-space:nowrap; }
.nav-badge {
  margin-left:auto; background:var(--gold); color:var(--navy); font-size:9px;
  font-weight:700; padding:2px 7px; border-radius:20px; flex-shrink:0;
}
.sidebar.collapsed .nav-label, .sidebar.collapsed .nav-badge { display:none; }

.sidebar-footer { padding:18px 22px; border-top:1px solid var(--border); overflow:hidden; }
.sidebar-footer a {
  font-size:11px; color:var(--blue-wash); text-decoration:none;
  display:flex; align-items:center; gap:8px; white-space:nowrap;
  transition:color .2s;
}
.sidebar-footer a:hover { color:var(--white-pure); }
.sidebar.collapsed .sidebar-footer span { display:none; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main { margin-left:var(--sidebar-w); flex:1; min-height:100vh; transition:margin-left .3s; }
.main.expanded { margin-left:60px; }

.topbar {
  height:var(--topbar-h); background:rgba(26,30,38,0.96); backdrop-filter:blur(16px);
  border-bottom:1px solid var(--border); padding:0 32px;
  display:flex; justify-content:space-between; align-items:center;
  position:sticky; top:0; z-index:50;
}
.topbar-left { display:flex; align-items:center; gap:16px; }
.breadcrumb { font-size:11px; color:rgba(120,180,220,0.35); }
.breadcrumb em { color:var(--blue-pale); font-style:normal; }
.topbar-title { font-family:var(--display); font-size:20px; font-weight:700; color:var(--white-pure); }
.topbar-title em { color:var(--blue-pale); }
.topbar-right { display:flex; gap:10px; align-items:center; }

/* Supabase status pill */
.db-status {
  display:flex; align-items:center; gap:7px; padding:5px 12px;
  border:1px solid var(--border); font-size:10px; border-radius:20px;
  color:rgba(211,211,211,0.5); cursor:pointer; transition:all .2s;
}
.db-status:hover { border-color:var(--border-hi); color:var(--white-pure); }
.db-dot { width:7px; height:7px; border-radius:50%; background:var(--red); flex-shrink:0; }
.db-dot.connected { background:var(--green); animation:pulse-dot 2.5s infinite; }
@keyframes pulse-dot { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.5;transform:scale(.7)} }
.db-label { white-space:nowrap; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BUTTONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.btn {
  padding:9px 18px; font-family:var(--body); font-size:11px; font-weight:600;
  letter-spacing:.14em; text-transform:uppercase; border-radius:2px;
  cursor:pointer; transition:all .2s; border:none; display:inline-flex; align-items:center; gap:6px;
}
.btn-primary { background:linear-gradient(135deg,var(--blue),var(--blue-wash)); color:white; }
.btn-primary:hover { transform:translateY(-1px); box-shadow:0 6px 20px rgba(100,149,237,0.38); }
.btn-ghost { background:rgba(120,180,220,0.07); color:var(--muted); border:1px solid var(--border); }
.btn-ghost:hover { background:rgba(120,180,220,0.13); color:var(--white-pure); border-color:var(--border-hi); }
.btn-danger { background:rgba(248,113,113,0.1); color:var(--red); border:1px solid rgba(248,113,113,0.18); }
.btn-danger:hover { background:rgba(248,113,113,0.18); }
.btn-success { background:rgba(74,222,128,0.1); color:var(--green); border:1px solid rgba(74,222,128,0.18); }
.btn-success:hover { background:rgba(74,222,128,0.18); }
.btn-amber { background:rgba(251,191,36,0.1); color:var(--amber); border:1px solid rgba(251,191,36,0.18); }
.btn-amber:hover { background:rgba(251,191,36,0.18); }
.btn-sm { padding:6px 13px; font-size:10px; }
.btn-xs { padding:4px 10px; font-size:9px; }
.btn-icon { padding:7px 9px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTENT / TABS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.content { padding:28px 32px; }
.tab { display:none; animation:tabIn .25s ease; }
.tab.active { display:block; }
@keyframes tabIn { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PANELS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.panel { background:var(--navy-mid); border:1px solid var(--border); margin-bottom:20px; }
.panel-head {
  padding:16px 22px; border-bottom:1px solid var(--border);
  display:flex; justify-content:space-between; align-items:center; gap:12px;
}
.panel-head-info {}
.panel-head-title { font-size:11px; font-weight:600; letter-spacing:.16em; text-transform:uppercase; color:var(--white-pure); }
.panel-head-sub { font-size:11px; color:rgba(120,180,220,0.38); margin-top:2px; }
.panel-body { padding:22px; }
.panel-actions { display:flex; gap:8px; flex-shrink:0; flex-wrap:wrap; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stats-row { display:grid; grid-template-columns:repeat(5,1fr); gap:14px; margin-bottom:22px; }
.stat-card {
  background:var(--navy-mid); border:1px solid var(--border); padding:18px 20px;
  position:relative; overflow:hidden; cursor:default; transition:border-color .2s;
}
.stat-card:hover { border-color:var(--border-hi); }
.stat-card::before {
  content:''; position:absolute; top:0; left:0; right:0; height:2px;
}
.stat-c1::before { background:linear-gradient(90deg,var(--blue),transparent); }
.stat-c2::before { background:linear-gradient(90deg,var(--gold),transparent); }
.stat-c3::before { background:linear-gradient(90deg,var(--green),transparent); }
.stat-c4::before { background:linear-gradient(90deg,var(--amber),transparent); }
.stat-c5::before { background:linear-gradient(90deg,var(--blue-pale),transparent); }
.stat-icon { font-size:20px; margin-bottom:10px; }
.stat-label { font-size:8px; letter-spacing:.22em; text-transform:uppercase; color:rgba(120,180,220,0.4); margin-bottom:8px; }
.stat-value { font-family:var(--display); font-size:30px; font-weight:900; color:var(--white-pure); line-height:1; }
.stat-sub { font-size:10px; color:rgba(211,211,211,0.35); margin-top:5px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORM FIELDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.field { margin-bottom:18px; }
.field label {
  display:flex; align-items:center; gap:6px;
  font-size:9px; letter-spacing:.2em; text-transform:uppercase; color:var(--gold); margin-bottom:8px;
}
.field-optional { font-size:8px; color:rgba(120,180,220,0.3); text-transform:none; letter-spacing:0; }
.field input, .field textarea, .field select {
  width:100%; background:var(--navy); border:1px solid var(--border);
  color:var(--white-pure); padding:11px 15px; font-family:var(--body); font-size:13px;
  outline:none; transition:border-color .2s; border-radius:2px;
}
.field input:focus, .field textarea:focus, .field select:focus { border-color:rgba(100,149,237,0.4); }
.field textarea { min-height:90px; resize:vertical; line-height:1.65; }
.field select option { background:var(--navy-mid); }
.field-hint { font-size:10px; color:rgba(120,180,220,0.3); margin-top:5px; line-height:1.5; }
.field-row { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.field-row-3 { display:grid; grid-template-columns:1fr 1fr 1fr; gap:16px; }
.section-save { margin-top:6px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PHOTO MANAGER (new)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.photo-manager { display:grid; grid-template-columns:180px 1fr; gap:20px; align-items:start; }
.photo-preview-wrap {
  position:relative; width:180px; height:180px; background:var(--navy);
  border:2px dashed rgba(120,180,220,0.18); display:flex; align-items:center;
  justify-content:center; transition:border-color .2s; overflow:hidden; border-radius:4px;
}
.photo-preview-wrap:hover { border-color:var(--border-hi); }
.photo-preview-img { width:100%; height:100%; object-fit:cover; }
.photo-preview-placeholder { text-align:center; padding:20px; }
.photo-preview-placeholder .ph-icon { font-size:32px; opacity:.3; margin-bottom:8px; }
.photo-preview-placeholder .ph-label { font-size:10px; color:rgba(120,180,220,0.3); letter-spacing:.12em; text-transform:uppercase; }
/* hover overlay removed â€” buttons are now below the preview instead */
.photo-options { display:flex; flex-direction:column; gap:10px; }
.photo-url-row { display:flex; gap:8px; }
.photo-url-input { flex:1; }

/* Gallery item action overlay (separate from hero photo) */

/* Photo gallery grid */
.gallery-grid {
  display:grid; grid-template-columns:repeat(auto-fill, minmax(130px,1fr)); gap:10px;
  margin-bottom:10px;
}
.gallery-item {
  position:relative; aspect-ratio:1; overflow:hidden;
  border:1px solid var(--border); transition:border-color .2s; border-radius:2px;
}
.gallery-item:hover { border-color:var(--border-hi); }
.gallery-item img { width:100%; height:100%; object-fit:cover; transition:transform .3s; display:block; }
.gallery-item:hover img { transform:scale(1.04); }
.gallery-item-overlay {
  position:absolute; inset:0; background:rgba(0,0,0,0.68);
  display:none; align-items:center; justify-content:center; gap:6px;
  padding:8px;
}
.gallery-item:hover .gallery-item-overlay { display:flex !important; }
.gallery-add {
  aspect-ratio:1; border:2px dashed rgba(120,180,220,0.18); display:flex;
  align-items:center; justify-content:center; cursor:pointer; transition:all .2s;
  flex-direction:column; gap:6px; color:rgba(120,180,220,0.3); font-size:11px;
  border-radius:2px;
}
.gallery-add:hover { border-color:var(--border-hi); color:var(--white-pure); }
.gallery-add-icon { font-size:24px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NOW & NEXT EDITOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.now-next-grid { display:grid; grid-template-columns:1fr 1fr; gap:18px; }
.now-items-list { display:flex; flex-direction:column; gap:8px; margin-top:10px; }
.now-item-edit {
  background:var(--navy); border:1px solid var(--border); padding:14px 16px;
  display:flex; align-items:flex-start; gap:10px;
}
.now-item-content { flex:1; }
.now-item-title { font-size:12px; font-weight:600; color:var(--white-pure); margin-bottom:2px; }
.now-item-text { font-size:11px; color:rgba(184,214,238,0.5); line-height:1.55; }
.now-item-actions { display:flex; gap:6px; flex-shrink:0; }
.dot-color-now { width:10px; height:10px; border-radius:50%; background:var(--blue-wash); flex-shrink:0; margin-top:4px; }
.dot-color-next { width:10px; height:10px; border-radius:50%; background:var(--gold); flex-shrink:0; margin-top:4px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROJECTS / LEARNING LISTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.item-list { display:flex; flex-direction:column; gap:10px; }
.item-row {
  background:var(--navy); border:1px solid var(--border); padding:16px 18px;
  display:flex; align-items:center; gap:14px; transition:border-color .2s;
}
.item-row:hover { border-color:rgba(120,180,220,0.16); }
.item-drag { color:rgba(120,180,220,0.2); cursor:grab; font-size:16px; flex-shrink:0; }
.item-drag:active { cursor:grabbing; }
.item-icon { font-size:22px; flex-shrink:0; }
.item-info { flex:1; min-width:0; }
.item-cat { font-size:8px; letter-spacing:.18em; text-transform:uppercase; color:var(--gold); margin-bottom:3px; }
.item-title { font-size:14px; font-weight:600; color:var(--white-pure); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.item-desc { font-size:11px; color:rgba(184,214,238,0.45); margin-top:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.item-actions { display:flex; gap:7px; flex-shrink:0; }
.progress-mini { margin-top:6px; }
.progress-mini-bar { height:3px; background:rgba(120,180,220,0.1); border-radius:2px; }
.progress-mini-fill { height:100%; background:linear-gradient(90deg,var(--gold),var(--gold-light)); border-radius:2px; transition:width .4s; }

/* Tags */
.tags-wrap { display:flex; flex-wrap:wrap; gap:5px; margin-top:6px; }
.tag-pill {
  font-size:9px; letter-spacing:.1em; text-transform:uppercase;
  padding:3px 9px; border:1px solid rgba(120,180,220,0.18);
  color:rgba(184,214,238,0.55); background:rgba(120,180,220,0.05);
  display:flex; align-items:center; gap:5px; border-radius:2px;
}
.tag-remove { cursor:pointer; color:var(--red); font-size:11px; line-height:1; transition:opacity .2s; }
.tag-remove:hover { opacity:.7; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FEEDBACK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.fb-filters { display:flex; gap:8px; margin-bottom:18px; flex-wrap:wrap; }
.fb-filter {
  padding:6px 14px; font-size:10px; letter-spacing:.12em; text-transform:uppercase;
  border:1px solid var(--border); color:rgba(211,211,211,0.45); cursor:pointer;
  transition:all .2s; border-radius:2px; background:none;
}
.fb-filter.active { border-color:var(--blue); color:var(--blue-pale); background:var(--blue-dim); }
.fb-filter:hover { color:var(--white-pure); }
.fb-sort { margin-left:auto; }

.fb-list { display:flex; flex-direction:column; gap:12px; }
.fb-card {
  background:var(--navy); border:1px solid var(--border); padding:18px 20px;
  position:relative; transition:border-color .2s;
}
.fb-card:hover { border-color:rgba(120,180,220,0.18); }
.fb-card.unread { border-left:3px solid var(--gold); }
.fb-card.read { border-left:3px solid rgba(120,180,220,0.15); opacity:.75; }
.fb-card-head { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:10px; gap:12px; }
.fb-name { font-size:14px; font-weight:600; color:var(--white-pure); display:flex; align-items:center; gap:7px; }
.fb-unread-dot { width:7px; height:7px; border-radius:50%; background:var(--gold); display:inline-block; animation:pulse-dot 2s infinite; }
.fb-meta { font-size:10px; color:rgba(120,180,220,0.38); margin-top:2px; }
.fb-rating { display:flex; gap:2px; margin-bottom:8px; }
.fb-star-filled { color:#FF6F61; font-size:13px; }
.fb-star-empty { color:rgba(120,180,220,0.18); font-size:13px; }
.fb-rating-label { font-size:10px; color:rgba(255,111,97,0.6); margin-left:6px; letter-spacing:.08em; text-transform:uppercase; }
.fb-msg { font-size:13px; line-height:1.75; color:rgba(208,232,248,0.65); }
.fb-actions { display:flex; gap:7px; margin-top:14px; align-items:center; }
.fb-source { margin-left:auto; font-size:9px; color:rgba(120,180,220,0.25); letter-spacing:.1em; text-transform:uppercase; }
.fb-source.cloud { color:rgba(74,222,128,0.45); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTACT EDITOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.contact-preview {
  background:var(--navy); border:1px solid var(--border); padding:16px 20px;
  display:flex; align-items:center; gap:14px; margin-bottom:8px;
}
.contact-preview-icon { font-size:22px; flex-shrink:0; }
.contact-preview-info { flex:1; }
.contact-preview-label { font-size:8px; letter-spacing:.2em; text-transform:uppercase; color:var(--gold); margin-bottom:2px; }
.contact-preview-val { font-size:13px; color:var(--white-pure); }
.contact-live { font-size:9px; color:rgba(74,222,128,0.55); margin-left:auto; letter-spacing:.1em; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SETTINGS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.supabase-setup {
  background:linear-gradient(135deg,rgba(74,222,128,0.06),rgba(100,149,237,0.06));
  border:1px solid rgba(74,222,128,0.18); padding:22px;
}
.supabase-setup-title { font-size:13px; font-weight:600; color:var(--green); margin-bottom:6px; display:flex; align-items:center; gap:8px; }
.supabase-setup-desc { font-size:12px; color:rgba(184,214,238,0.55); line-height:1.7; margin-bottom:16px; }
.setup-steps { display:flex; flex-direction:column; gap:8px; margin-bottom:18px; }
.setup-step { display:flex; gap:12px; align-items:flex-start; font-size:12px; color:rgba(184,214,238,0.65); line-height:1.6; }
.step-num {
  width:22px; height:22px; border-radius:50%; background:rgba(74,222,128,0.15);
  color:var(--green); font-size:10px; font-weight:700; display:flex; align-items:center;
  justify-content:center; flex-shrink:0; margin-top:2px;
}
.code-snippet {
  background:rgba(0,0,0,0.3); border:1px solid rgba(120,180,220,0.1);
  padding:12px 16px; font-family:var(--mono); font-size:11px; color:var(--green);
  margin:10px 0; border-radius:2px; overflow-x:auto; white-space:pre; line-height:1.7;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.modal-overlay {
  position:fixed; inset:0; background:rgba(10,16,26,0.84); z-index:500;
  display:flex; align-items:center; justify-content:center; backdrop-filter:blur(6px);
}
.modal-overlay.hidden { display:none; }
.modal {
  background:var(--navy-mid); border:1px solid var(--border);
  width:600px; max-width:92vw; max-height:88vh; overflow-y:auto;
  animation:modalIn .2s ease;
}
@keyframes modalIn { from{opacity:0;transform:scale(.96)translateY(-12px)} to{opacity:1;transform:scale(1)translateY(0)} }
.modal-head {
  padding:18px 22px; border-bottom:1px solid var(--border);
  display:flex; justify-content:space-between; align-items:center; position:sticky; top:0; background:var(--navy-mid);
}
.modal-title { font-size:13px; font-weight:600; color:var(--white-pure); }
.modal-close { cursor:pointer; color:var(--muted); font-size:18px; transition:color .2s; width:28px; height:28px; display:flex; align-items:center; justify-content:center; }
.modal-close:hover { color:var(--white-pure); }
.modal-body { padding:22px; }
.modal-footer { padding:14px 22px; border-top:1px solid var(--border); display:flex; gap:8px; justify-content:flex-end; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EMPTY STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.empty { text-align:center; padding:52px 32px; color:rgba(120,180,220,0.3); }
.empty-icon { font-size:38px; margin-bottom:12px; }
.empty-msg { font-size:13px; line-height:1.7; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast-wrap { position:fixed; bottom:22px; right:22px; z-index:9999; display:flex; flex-direction:column; gap:8px; }
.toast {
  background:var(--navy-light); border:1px solid var(--border); border-radius:2px;
  padding:13px 18px; font-size:13px; color:var(--white-pure); min-width:240px;
  animation:slideIn .25s ease; display:flex; align-items:center; gap:9px;
}
.toast.ok { border-left:3px solid var(--green); }
.toast.err { border-left:3px solid var(--red); }
.toast.info { border-left:3px solid var(--blue); }
@keyframes slideIn { from{opacity:0;transform:translateX(18px)} to{opacity:1;transform:translateX(0)} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MISC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.divider { height:1px; background:var(--border); margin:20px 0; }
.badge { font-size:9px; letter-spacing:.1em; text-transform:uppercase; padding:3px 8px; border-radius:20px; font-weight:600; }
.badge-green { background:rgba(74,222,128,0.12); color:var(--green); }
.badge-blue { background:rgba(100,149,237,0.12); color:var(--blue-pale); }
.badge-red { background:rgba(248,113,113,0.12); color:var(--red); }
.badge-amber { background:rgba(251,191,36,0.12); color:var(--amber); }
.color-muted { color:rgba(184,214,238,0.45); }
.text-mono { font-family:var(--mono); font-size:12px; }
.sr-only { position:absolute; width:1px; height:1px; padding:0; overflow:hidden; clip:rect(0,0,0,0); }

::-webkit-scrollbar { width:5px; height:5px; }
::-webkit-scrollbar-track { background:var(--navy); }
::-webkit-scrollbar-thumb { background:rgba(100,149,237,0.25); border-radius:2px; }
::-webkit-scrollbar-thumb:hover { background:rgba(100,149,237,0.45); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CODE BLOCKS â€” scrollable
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.code-snippet {
  font-family: var(--mono);
  font-size: 12px;
  line-height: 1.8;
  color: #7ade80;
  background: #0d1117;
  border: 1px solid rgba(100,149,237,0.15);
  border-radius: 4px;
  padding: 18px 20px;
  overflow-x: auto;
  overflow-y: auto;
  max-height: 320px;
  white-space: pre;
  tab-size: 2;
}
#indexCode {
  color: rgba(184,214,238,0.75);
  max-height: 400px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROGRESS SLIDER custom
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
input[type=range] {
  -webkit-appearance: none;
  appearance: none;
  height: 6px;
  border-radius: 3px;
  background: var(--navy-light);
  outline: none;
}
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px; height: 18px;
  border-radius: 50%;
  background: var(--blue);
  cursor: pointer;
  border: 2px solid var(--blue-wash);
  box-shadow: 0 0 6px rgba(100,149,237,0.4);
  transition: box-shadow .15s;
}
input[type=range]::-webkit-slider-thumb:hover {
  box-shadow: 0 0 12px rgba(100,149,237,0.7);
}

@media(max-width:900px) {
  .sidebar { width:60px; }
  .sidebar .sidebar-logo-text, .sidebar .nav-label, .sidebar .nav-badge,
  .sidebar .nav-section, .sidebar .sidebar-footer span { display:none; }
  .sidebar .nav-item { padding:13px; justify-content:center; }
  .sidebar .sidebar-toggle { display:none; }
  .main { margin-left:60px; }
  .stats-row { grid-template-columns:1fr 1fr 1fr; }
  .field-row, .now-next-grid { grid-template-columns:1fr; }
  .photo-manager { grid-template-columns:1fr; }
}
@media(max-width:600px) {
  .stats-row { grid-template-columns:1fr 1fr; }
  .topbar { padding:0 16px; }
  .content { padding:16px; }
}
</style>
</head>
<body>

<!-- â•â• LOCK SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="lock-screen" id="lockScreen">
  <div class="lock-bg"></div>
  <div class="lock-grid"></div>
  <div class="lock-box">
    <div class="lock-logo">Om<em>.</em>Admin</div>
    <div class="lock-tagline">Portfolio Control Panel</div>
    <div class="lock-card">
      <div class="lock-label">Admin Password</div>
      <input type="password" class="lock-input" id="lockInput" placeholder="Â· Â· Â· Â· Â· Â·"
        autocomplete="off" onkeydown="if(event.key==='Enter')unlock()">
      <div class="lock-error" id="lockError"></div>
      <button class="lock-btn" onclick="unlock()">Unlock Panel â†’</button>
    </div>
    <div class="lock-hint">Default password is <code>admin123</code> â€” change it in Settings</div>
  </div>
</div>

<!-- â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-logo">
    <div class="sidebar-logo-icon">O</div>
    <div class="sidebar-logo-text">
      <div class="sidebar-logo-name">Om<em>.</em>Admin</div>
      <div class="sidebar-logo-sub">Control Panel</div>
    </div>
    <button class="sidebar-toggle" onclick="toggleSidebar()" title="Collapse">âŸ¨</button>
  </div>
  <nav class="sidebar-nav">
    <div class="nav-section">Overview</div>
    <div class="nav-item active" data-tab="dashboard" onclick="switchTab('dashboard')">
      <span class="nav-icon">ğŸ“Š</span><span class="nav-label">Dashboard</span>
    </div>
    <div class="nav-section">Portfolio Content</div>
    <div class="nav-item" data-tab="hero" onclick="switchTab('hero')">
      <span class="nav-icon">ğŸ </span><span class="nav-label">Hero & Profile</span>
    </div>
    <div class="nav-item" data-tab="gallery" onclick="switchTab('gallery')">
      <span class="nav-icon">ğŸ–¼ï¸</span><span class="nav-label">Photo Gallery</span>
    </div>
    <div class="nav-item" data-tab="projects" onclick="switchTab('projects')">
      <span class="nav-icon">ğŸ’¼</span><span class="nav-label">Projects</span>
    </div>
    <div class="nav-item" data-tab="nownext" onclick="switchTab('nownext')">
      <span class="nav-icon">ğŸš€</span><span class="nav-label">Now & Next</span>
    </div>
    <div class="nav-item" data-tab="learning" onclick="switchTab('learning')">
      <span class="nav-icon">ğŸ“š</span><span class="nav-label">Learning & Skills</span>
    </div>
    <div class="nav-item" data-tab="about" onclick="switchTab('about')">
      <span class="nav-icon">ğŸ‘¤</span><span class="nav-label">About Me</span>
    </div>
    <div class="nav-item" data-tab="contact" onclick="switchTab('contact')">
      <span class="nav-icon">ğŸ“¬</span><span class="nav-label">Contact Info</span>
    </div>
    <div class="nav-section">Audience</div>
    <div class="nav-item" data-tab="feedback" onclick="switchTab('feedback')">
      <span class="nav-icon">ğŸ’¬</span><span class="nav-label">Feedback Inbox</span>
      <span class="nav-badge" id="unreadBadge" style="display:none">0</span>
    </div>
    <div class="nav-section">System</div>
    <div class="nav-item" data-tab="database" onclick="switchTab('database')">
      <span class="nav-icon">â˜ï¸</span><span class="nav-label">Database Setup</span>
    </div>
    <div class="nav-item" data-tab="settings" onclick="switchTab('settings')">
      <span class="nav-icon">âš™ï¸</span><span class="nav-label">Settings</span>
    </div>
  </nav>
  <div class="sidebar-footer">
    <a href="index.html" target="_blank">
      <span class="nav-icon">â†—</span><span>View Portfolio</span>
    </a>
  </div>
</div>

<!-- â•â• MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="main" id="main">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="topbar-left">
      <div>
        <div class="breadcrumb">Om Puri / <em id="breadcrumb">Dashboard</em></div>
        <div class="topbar-title" id="topbarTitle">Dashboard</div>
      </div>
    </div>
    <div class="topbar-right">
      <div class="db-status" onclick="switchTab('database')" title="Click to configure database">
        <div class="db-dot" id="dbDot"></div>
        <span class="db-label" id="dbLabel">Not Connected</span>
      </div>
      <button class="btn btn-ghost btn-sm" onclick="exportData()">â¬‡ Export</button>
      <button class="btn btn-primary btn-sm" onclick="saveAll()">âœ“ Save All</button>
    </div>
  </div>

  <div class="content">

    <!-- â•â•â• DASHBOARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="tab active" id="tab-dashboard">

      <div class="stats-row">
        <div class="stat-card stat-c1">
          <div class="stat-icon">ğŸ’¬</div>
          <div class="stat-label">Total Feedback</div>
          <div class="stat-value" id="st-total">0</div>
          <div class="stat-sub">All time</div>
        </div>
        <div class="stat-card stat-c2">
          <div class="stat-icon">ğŸ””</div>
          <div class="stat-label">Unread</div>
          <div class="stat-value" id="st-unread" style="color:var(--gold)">0</div>
          <div class="stat-sub">Need attention</div>
        </div>
        <div class="stat-card stat-c3">
          <div class="stat-icon">â­</div>
          <div class="stat-label">Avg Rating</div>
          <div class="stat-value" id="st-rating" style="color:var(--green)">â€”</div>
          <div class="stat-sub">Out of 5 stars</div>
        </div>
        <div class="stat-card stat-c4">
          <div class="stat-icon">ğŸ’¼</div>
          <div class="stat-label">Projects</div>
          <div class="stat-value" id="st-projects" style="color:var(--amber)">0</div>
          <div class="stat-sub">In portfolio</div>
        </div>
        <div class="stat-card stat-c5">
          <div class="stat-icon">ğŸ“š</div>
          <div class="stat-label">Skills Listed</div>
          <div class="stat-value" id="st-skills" style="color:var(--blue-pale)">0</div>
          <div class="stat-sub">Learning cards</div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">Recent Feedback</div>
            <div class="panel-head-sub">Latest messages from visitors</div>
          </div>
          <button class="btn btn-ghost btn-sm" onclick="switchTab('feedback')">View All â†’</button>
        </div>
        <div class="panel-body" id="dash-recent">
          <div class="empty"><div class="empty-icon">ğŸ’¬</div><div class="empty-msg">No feedback yet.<br>Share your portfolio link to start receiving messages!</div></div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">Quick Actions</div>
            <div class="panel-head-sub">Jump straight to common tasks</div>
          </div>
        </div>
        <div class="panel-body">
          <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;">
            <button class="btn btn-ghost" style="justify-content:flex-start;padding:14px 16px;" onclick="switchTab('hero')">ğŸ  Edit Hero</button>
            <button class="btn btn-ghost" style="justify-content:flex-start;padding:14px 16px;" onclick="switchTab('gallery')">ğŸ–¼ï¸ Manage Photos</button>
            <button class="btn btn-ghost" style="justify-content:flex-start;padding:14px 16px;" onclick="switchTab('projects')">ğŸ’¼ Add Project</button>
            <button class="btn btn-ghost" style="justify-content:flex-start;padding:14px 16px;" onclick="switchTab('nownext')">ğŸš€ Now & Next</button>
            <button class="btn btn-ghost" style="justify-content:flex-start;padding:14px 16px;" onclick="switchTab('learning')">ğŸ“š Add Skill</button>
            <button class="btn btn-ghost" style="justify-content:flex-start;padding:14px 16px;" onclick="switchTab('feedback')">ğŸ’¬ Inbox</button>
            <button class="btn btn-amber" style="justify-content:flex-start;padding:14px 16px;" onclick="switchTab('database')">â˜ï¸ Setup Cloud DB</button>
          </div>
        </div>
      </div>

    </div>

    <!-- â•â•â• HERO & PROFILE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="tab" id="tab-hero">

      <!-- HOW EDITS WORK banner -->
      <div style="background:rgba(100,149,237,0.07);border:1px solid rgba(100,149,237,0.18);padding:14px 20px;margin-bottom:18px;display:flex;align-items:flex-start;gap:12px;border-radius:2px;">
        <span style="font-size:18px;flex-shrink:0;">â„¹ï¸</span>
        <div style="font-size:12px;color:rgba(184,214,238,0.65);line-height:1.7;">
          <strong style="color:var(--blue-pale);">How edits work:</strong> Save your changes here, then click <strong style="color:var(--white-pure)">ğŸ“‹ Copy Code</strong> to get the exact HTML snippet to paste into your <code style="font-family:var(--mono);background:rgba(100,149,237,0.1);padding:1px 5px;">index.html</code> on GitHub. Photos uploaded here are stored as previews only â€” for the live site, use an image URL (imgur, GitHub raw, etc).
        </div>
      </div>

      <!-- PHOTO PANEL â€” completely rebuilt -->
      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">ğŸ‘¤ Profile Photo</div>
            <div class="panel-head-sub">Your main hero photo â€” shown at the top of the portfolio</div>
          </div>
          <div class="panel-actions">
            <button class="btn btn-danger btn-sm" onclick="clearHeroPhoto()">âœ• Remove Photo</button>
          </div>
        </div>
        <div class="panel-body">

          <!-- Photo preview big + centered -->
          <div style="display:flex;gap:28px;align-items:flex-start;flex-wrap:wrap;">

            <!-- Preview box -->
            <div style="flex-shrink:0;">
              <div id="heroPrevBox" style="width:200px;height:200px;border-radius:6px;overflow:hidden;border:2px dashed rgba(120,180,220,0.22);background:var(--navy);display:flex;align-items:center;justify-content:center;position:relative;">
                <img id="heroPhotoPreview" src="" alt="" style="width:100%;height:100%;object-fit:cover;display:none;border-radius:4px;">
                <div id="heroPPHolder" style="text-align:center;padding:24px;">
                  <div style="font-size:40px;opacity:.25;margin-bottom:8px;">ğŸ‘¤</div>
                  <div style="font-size:9px;letter-spacing:.18em;text-transform:uppercase;color:rgba(120,180,220,0.3);">No Photo</div>
                </div>
              </div>
              <div style="display:flex;gap:6px;margin-top:10px;justify-content:center;">
                <button class="btn btn-primary btn-sm" onclick="document.getElementById('heroPhotoFile').click()">ğŸ“ Upload File</button>
              </div>
              <input type="file" id="heroPhotoFile" accept="image/*" style="display:none" onchange="handleHeroPhoto(this)">
            </div>

            <!-- URL method + caption/location -->
            <div style="flex:1;min-width:260px;">
              <div class="field">
                <label>ğŸ“ Paste Image URL <span class="field-optional">(recommended for live site)</span></label>
                <div style="display:flex;gap:8px;">
                  <input type="text" id="heroPhotoUrl" placeholder="https://i.imgur.com/yourphoto.jpg" style="flex:1;">
                  <button class="btn btn-success" onclick="applyHeroPhotoUrl()">âœ“ Apply</button>
                </div>
                <div class="field-hint">Best option for GitHub Pages: upload to <strong style="color:var(--blue-pale);">imgur.com</strong> â†’ right-click image â†’ "Copy image address" â†’ paste here. Or use the raw GitHub URL of a photo in your repo.</div>
              </div>

              <div id="photoUrlStatus" style="display:none;margin:-10px 0 14px;padding:10px 14px;font-size:12px;border-radius:2px;"></div>

              <div class="field-row">
                <div class="field">
                  <label>Badge / Age Text</label>
                  <input type="text" id="heroBadge" placeholder="17">
                  <div class="field-hint">Small badge on your photo</div>
                </div>
                <div class="field">
                  <label>Location Line</label>
                  <input type="text" id="heroLocation" placeholder="Bharatpur, Chitwan Â· Nepal">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- HERO TEXT PANEL -->
      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">âœï¸ Hero Text</div>
            <div class="panel-head-sub">The headline and intro paragraph everyone sees first</div>
          </div>
        </div>
        <div class="panel-body">
          <div class="field-row">
            <div class="field">
              <label>Full Name</label>
              <input type="text" id="heroName" placeholder="Om Prakash Puri">
            </div>
            <div class="field">
              <label>Subtitle / Roles</label>
              <input type="text" id="heroSub" placeholder="Student Â· Creator Â· Explorer">
            </div>
          </div>
          <div class="field">
            <label>Tagline / Bio paragraph</label>
            <textarea id="heroTagline" rows="4" placeholder="A short, punchy description about yourself..."></textarea>
          </div>
          <div class="field-row">
            <div class="field">
              <label>CTA Button 1 Text</label>
              <input type="text" id="heroCta1" placeholder="Explore My Work">
            </div>
            <div class="field">
              <label>CTA Button 2 Text</label>
              <input type="text" id="heroCta2" placeholder="About Me">
            </div>
          </div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:6px;">
            <button class="btn btn-success" onclick="saveSection('hero')">âœ“ Save Hero Section</button>
            <button class="btn btn-ghost" onclick="previewHeroCode()">ğŸ“‹ Copy Code for index.html</button>
          </div>
          <div id="heroCodeOut" style="display:none;margin-top:16px;">
            <div style="font-size:10px;letter-spacing:.18em;text-transform:uppercase;color:var(--gold);margin-bottom:8px;">Copy this into your index.html â€” replace the existing hero section values:</div>
            <pre id="heroCodePre" class="code-snippet" style="max-height:260px;overflow:auto;font-size:11px;"></pre>
            <button class="btn btn-ghost btn-sm" style="margin-top:8px;" onclick="copyHeroCode()">ğŸ“‹ Copy to Clipboard</button>
          </div>
        </div>
      </div>

    </div>

    <!-- â•â•â• PHOTO GALLERY â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="tab" id="tab-gallery">
      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">ğŸ–¼ï¸ Photo Gallery</div>
            <div class="panel-head-sub">Photos shown in the gallery section of your portfolio</div>
          </div>
          <div class="panel-actions">
            <button class="btn btn-ghost btn-sm" onclick="previewGalleryCode()">ğŸ“‹ Copy Gallery Code</button>
            <button class="btn btn-primary btn-sm" onclick="document.getElementById('galleryUpload').click()">+ Add by Filename</button>
          </div>
        </div>
        <div class="panel-body">
          <input type="file" id="galleryUpload" accept="image/*" multiple style="display:none" onchange="handleGalleryUpload(this)">

          <!-- Info banner -->
          <div style="background:rgba(100,149,237,0.06);border:1px solid rgba(100,149,237,0.14);padding:14px 18px;margin-bottom:18px;border-radius:2px;">
            <div style="font-size:11px;color:var(--blue-pale);font-weight:600;margin-bottom:5px;">ğŸ“¸ How to add your photos</div>
            <div style="font-size:12px;color:rgba(184,214,238,0.55);line-height:1.75;">
              Your photos are in your GitHub repo. Just type the <strong style="color:var(--white-pure)">exact filename</strong> (e.g. <code class="text-mono">1.jpg</code>) in the box below. They will show on your live site because they are already in the same folder as index.html.
              <br>Current files in your repo: <strong style="color:var(--white-pure)">1.jpg Â· 2.jpg Â· 3.jpg Â· 5jpg.jpg Â· 6.jpg Â· 7.jpg Â· 20251110_095653.jpg Â· FB_IMG_17720724405931.jpg Â· IMG-20251113-WA0009.jpg</strong>
            </div>
          </div>

          <!-- Add by filename row â€” prominent -->
          <div style="background:var(--navy);border:1px solid var(--border-hi);padding:18px 20px;margin-bottom:18px;border-radius:2px;">
            <div style="font-size:10px;letter-spacing:.18em;text-transform:uppercase;color:var(--gold);margin-bottom:10px;">Add a photo to gallery</div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
              <input type="text" id="galleryAddInput" placeholder="Filename: 1.jpg  or  Full URL: https://..." style="flex:2;min-width:200px;">
              <input type="text" id="galleryAddCaption" placeholder="Caption (optional)" style="flex:1;min-width:140px;">
              <button class="btn btn-primary" onclick="addGalleryItemByUrl()" style="flex-shrink:0;">+ Add</button>
            </div>
            <div class="field-hint" style="margin-top:8px;">Type the filename exactly as it is in your GitHub repo, like <code class="text-mono">IMG-20251113-WA0009.jpg</code></div>
          </div>

          <!-- Gallery grid -->
          <div class="gallery-grid" id="galleryGrid"></div>

          <div id="galleryCodeOut" style="display:none;margin-top:16px;">
            <div style="font-size:10px;letter-spacing:.18em;text-transform:uppercase;color:var(--gold);margin-bottom:8px;">Copy this list into your index.html gallery section:</div>
            <pre id="galleryCodePre" class="code-snippet" style="max-height:220px;overflow:auto;font-size:11px;"></pre>
            <button class="btn btn-ghost btn-sm" style="margin-top:8px;" onclick="copyGalleryCode()">ğŸ“‹ Copy to Clipboard</button>
          </div>
        </div>
      </div>
    </div>

    <!-- â•â•â• PROJECTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="tab" id="tab-projects">
      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">Portfolio Projects</div>
            <div class="panel-head-sub">Cards shown in the portfolio section</div>
          </div>
          <button class="btn btn-primary btn-sm" onclick="openProjectModal()">+ Add Project</button>
        </div>
        <div class="panel-body">
          <div class="item-list" id="projectList">
            <div class="empty"><div class="empty-icon">ğŸ’¼</div><div class="empty-msg">No projects yet.</div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- â•â•â• NOW & NEXT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="tab" id="tab-nownext">
      <div class="now-next-grid">

        <div class="panel">
          <div class="panel-head">
            <div class="panel-head-info">
              <div class="panel-head-title" style="color:var(--blue-pale)">ğŸ”µ Now â€” Currently Doing</div>
              <div class="panel-head-sub">What you're working on right now</div>
            </div>
            <button class="btn btn-ghost btn-sm" onclick="openNowNextModal('now')">+ Add Item</button>
          </div>
          <div class="panel-body" id="nowList">
            <div class="empty"><div class="empty-icon">ğŸ”µ</div><div class="empty-msg">Add your current activities</div></div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-head">
            <div class="panel-head-info">
              <div class="panel-head-title" style="color:var(--gold)">ğŸŸ¡ Next â€” Coming Soon</div>
              <div class="panel-head-sub">Your upcoming goals and plans</div>
            </div>
            <button class="btn btn-ghost btn-sm" onclick="openNowNextModal('next')">+ Add Item</button>
          </div>
          <div class="panel-body" id="nextList">
            <div class="empty"><div class="empty-icon">ğŸŸ¡</div><div class="empty-msg">Add your upcoming plans</div></div>
          </div>
        </div>

      </div>
      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">Pill Tags</div>
            <div class="panel-head-sub">Tags shown at the bottom of the Next card</div>
          </div>
        </div>
        <div class="panel-body">
          <div class="field">
            <label>Tags (comma-separated)</label>
            <input type="text" id="nownextTags" placeholder="Abroad âœˆï¸, Higher Education, Finance, AI & Robotics">
          </div>
          <button class="btn btn-success" onclick="saveSection('nownext')">âœ“ Save Now & Next</button>
        </div>
      </div>
    </div>

    <!-- â•â•â• LEARNING â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="tab" id="tab-learning">
      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">Learning & Skills</div>
            <div class="panel-head-sub">Progress cards shown in the Learning section</div>
          </div>
          <button class="btn btn-primary btn-sm" onclick="openLearningModal()">+ Add Skill</button>
        </div>
        <div class="panel-body">
          <div class="item-list" id="learningList">
            <div class="empty"><div class="empty-icon">ğŸ“š</div><div class="empty-msg">No skills added yet.</div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- â•â•â• ABOUT ME â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="tab" id="tab-about">
      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">About Me</div>
            <div class="panel-head-sub">Your personal story paragraphs</div>
          </div>
        </div>
        <div class="panel-body">
          <div class="field">
            <label>Paragraph 1 â€” Introduce yourself</label>
            <textarea id="aboutP1" rows="4" placeholder="Hi, I'm Om Prakash Puri â€” a 17-year-old student from Bharatpur..."></textarea>
          </div>
          <div class="field">
            <label>Paragraph 2 â€” Your interests & passions</label>
            <textarea id="aboutP2" rows="4" placeholder="My interests sit at the crossroads of finance, AI, and robotics..."></textarea>
          </div>
          <div class="field">
            <label>Paragraph 3 <span class="field-optional">(optional)</span></label>
            <textarea id="aboutP3" rows="3" placeholder="I am planning to go abroad for further studies..."></textarea>
          </div>
          <div class="field">
            <label>Paragraph 4 <span class="field-optional">(optional)</span></label>
            <textarea id="aboutP4" rows="3" placeholder="I'm still at the beginning of my professional journey..."></textarea>
          </div>
          <div class="field">
            <label>Skill Pills (comma-separated)</label>
            <input type="text" id="aboutSkills" placeholder="Finance, AI, Photography, Chess, Robotics, Coding, Nature">
            <div class="field-hint">These become the oval pill tags in your About section</div>
          </div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:6px;">
            <button class="btn btn-success" onclick="saveSection('about')">âœ“ Save About Me</button>
            <button class="btn btn-ghost" onclick="copyAboutText()">ğŸ“‹ Copy Text</button>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">Secondary Photo</div>
            <div class="panel-head-sub">Small photo shown in the about section (optional)</div>
          </div>
        </div>
        <div class="panel-body">
          <div class="field-row">
            <div class="field">
              <label>Photo filename or URL</label>
              <input type="text" id="aboutPhoto" placeholder="IMG-20251113-WA0009.jpg">
            </div>
            <div class="field">
              <label>Location tag text</label>
              <input type="text" id="aboutLocation" placeholder="Bharatpur, Chitwan, Nepal">
            </div>
          </div>
          <button class="btn btn-ghost btn-sm" onclick="saveSection('about')">Save</button>
        </div>
      </div>
    </div>

    <!-- â•â•â• CONTACT INFO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="tab" id="tab-contact">
      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">Contact Information</div>
            <div class="panel-head-sub">Links and handles shown in the contact section</div>
          </div>
        </div>
        <div class="panel-body">
          <div id="contactPreviewList"></div>
          <div class="divider"></div>
          <div class="field-row">
            <div class="field">
              <label>Email</label>
              <input type="email" id="ctEmail" placeholder="omprakashpui579@gmail.com">
            </div>
            <div class="field">
              <label>Phone / Mobile</label>
              <input type="text" id="ctPhone" placeholder="+977 9706435866">
            </div>
          </div>
          <div class="field-row">
            <div class="field">
              <label>Instagram</label>
              <input type="text" id="ctInsta" placeholder="@omprakashpuri579">
            </div>
            <div class="field">
              <label>Instagram URL</label>
              <input type="url" id="ctInstaUrl" placeholder="https://www.instagram.com/omprakashpuri579">
            </div>
          </div>
          <div class="field-row">
            <div class="field">
              <label>LinkedIn name</label>
              <input type="text" id="ctLinkedIn" placeholder="Om Prakash Puri">
            </div>
            <div class="field">
              <label>LinkedIn URL</label>
              <input type="url" id="ctLinkedInUrl" placeholder="https://www.linkedin.com/in/om-prakash-puri/">
            </div>
          </div>
          <div class="field-row">
            <div class="field">
              <label>GitHub username <span class="field-optional">(optional)</span></label>
              <input type="text" id="ctGithub" placeholder="omprakashpuri579">
            </div>
            <div class="field">
              <label>City / Location</label>
              <input type="text" id="ctCity" placeholder="Bharatpur, Nepal">
            </div>
          </div>
          <button class="btn btn-success section-save" onclick="saveSection('contact')">âœ“ Save Contact Info</button>
        </div>
      </div>
    </div>

    <!-- â•â•â• FEEDBACK INBOX â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="tab" id="tab-feedback">
      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">Feedback Inbox</div>
            <div class="panel-head-sub" id="fbSubtitle">Messages from your portfolio visitors</div>
          </div>
          <div class="panel-actions">
            <button class="btn btn-ghost btn-sm" onclick="syncFeedback()">â†» Refresh</button>
            <button class="btn btn-ghost btn-sm" onclick="markAllRead()">âœ“ Mark All Read</button>
            <button class="btn btn-danger btn-sm" onclick="clearAllFeedback()">ğŸ—‘ Clear All</button>
          </div>
        </div>
        <div class="panel-body">
          <div class="fb-filters">
            <button class="fb-filter active" data-filter="all" onclick="setFbFilter('all')">All</button>
            <button class="fb-filter" data-filter="unread" onclick="setFbFilter('unread')">Unread</button>
            <button class="fb-filter" data-filter="read" onclick="setFbFilter('read')">Read</button>
            <button class="fb-filter" data-filter="5star" onclick="setFbFilter('5star')">â˜…â˜…â˜…â˜…â˜…</button>
            <button class="fb-filter" data-filter="cloud" onclick="setFbFilter('cloud')">â˜ Cloud</button>
            <div class="fb-sort">
              <select onchange="setFbSort(this.value)" style="background:var(--navy);border:1px solid var(--border);color:var(--muted);padding:6px 10px;font-size:10px;letter-spacing:.1em;outline:none;cursor:pointer;">
                <option value="newest">Newest First</option>
                <option value="oldest">Oldest First</option>
                <option value="rating">Highest Rating</option>
              </select>
            </div>
          </div>
          <div class="fb-list" id="fbList">
            <div class="empty"><div class="empty-icon">ğŸ“­</div><div class="empty-msg">No feedback yet.<br>Once visitors submit the form on your portfolio, their messages will appear here.</div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- â•â•â• DATABASE SETUP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="tab" id="tab-database">

      <div style="background:rgba(74,222,128,0.07);border:1px solid rgba(74,222,128,0.22);padding:16px 22px;margin-bottom:18px;display:flex;align-items:center;gap:14px;">
        <span style="font-size:20px;">â˜ï¸</span>
        <div>
          <div style="font-size:13px;font-weight:600;color:var(--green);margin-bottom:2px;">Supabase is hardcoded and active</div>
          <div style="font-size:11px;color:rgba(184,214,238,0.5);">Your anon key is baked directly into admin.html and index.html â€” all visitors automatically send feedback to your cloud database.</div>
        </div>
        <span class="badge badge-green" style="margin-left:auto;flex-shrink:0;">â— Live</span>
      </div>

      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">â˜ï¸ Supabase Cloud Database</div>
            <div class="panel-head-sub">Connect to receive feedback from anyone, anywhere in the world</div>
          </div>
          <span class="badge badge-green" id="dbBadge" style="display:none">â— Connected</span>
        </div>
        <div class="panel-body">
          <div class="supabase-setup">
            <div class="supabase-setup-title">ğŸŒ Why you need this</div>
            <div class="supabase-setup-desc">
              Right now feedback only saves in the visitor's own browser. With Supabase, every message from every visitor in every country goes to a real cloud database â€” and you see it here instantly, from any device.
              <strong style="color:var(--white-pure)">It's completely free.</strong>
            </div>
            <div class="setup-steps">
              <div class="setup-step"><div class="step-num">1</div><div>Go to <strong style="color:var(--green)">supabase.com</strong> â†’ Start your project â†’ Sign up with GitHub â†’ Create New Project â†’ name it <strong>om-portfolio</strong>, region: <strong>Southeast Asia (Singapore)</strong></div></div>
              <div class="setup-step"><div class="step-num">2</div><div>In your Supabase project, click <strong>SQL Editor</strong> â†’ paste the SQL below â†’ click <strong>Run</strong></div></div>
              <div class="setup-step"><div class="step-num">3</div><div>Go to <strong>Settings â†’ API</strong> â†’ copy your <strong>Project URL</strong> and <strong>anon public key</strong></div></div>
              <div class="setup-step"><div class="step-num">4</div><div>Paste them in the fields below and click <strong>Connect & Test</strong></div></div>
            </div>
          </div>

          <div class="divider"></div>

          <div class="field">
            <label>SQL to run in Supabase (copy all of this)</label>
            <div class="code-snippet" id="sqlSnippet">create table feedbacks (
  id bigserial primary key,
  name text not null,
  email text,
  rating integer not null,
  rating_label text,
  msg text,
  date text,
  read boolean default false,
  source text default 'web',
  created_at timestamptz default now()
);
alter table feedbacks enable row level security;
create policy "insert" on feedbacks for insert to anon with check (true);
create policy "select" on feedbacks for select to anon using (true);
create policy "update" on feedbacks for update to anon using (true);
create policy "delete" on feedbacks for delete to anon using (true);</div>
            <button class="btn btn-ghost btn-sm" style="margin-top:8px;" onclick="copySql()">ğŸ“‹ Copy SQL</button>
          </div>

          <div class="divider"></div>

          <div class="field-row">
            <div class="field">
              <label>Supabase Project URL</label>
              <input type="url" id="sbUrl" placeholder="https://xxxxxxxxxxx.supabase.co">
            </div>
            <div class="field">
              <label>Supabase Anon Public Key</label>
              <input type="text" id="sbKey" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...">
            </div>
          </div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;">
            <button class="btn btn-success" onclick="connectSupabase()">â˜ï¸ Connect & Test</button>
            <button class="btn btn-ghost" onclick="disconnectSupabase()">Disconnect</button>
          </div>
          <div id="sbStatus" style="margin-top:14px;font-size:12px;color:rgba(184,214,238,0.5);"></div>

          <div class="divider"></div>

          <div style="background:rgba(100,149,237,0.06);border:1px solid rgba(100,149,237,0.14);padding:18px;margin-top:4px;">
            <div style="font-size:11px;font-weight:600;color:var(--blue-pale);margin-bottom:8px;">ğŸ“ After connecting, update your index.html too</div>
            <div style="font-size:12px;color:rgba(184,214,238,0.5);line-height:1.7;margin-bottom:10px;">
              For feedback submitted on your portfolio to reach Supabase, you need to add these same keys to your index.html file. I'll generate the exact code below once you've connected.
            </div>
            <div id="indexCodeBlock" style="display:none">
              <div class="code-snippet" id="indexCode"></div>
              <button class="btn btn-ghost btn-sm" style="margin-top:8px;" onclick="copyIndexCode()">ğŸ“‹ Copy Code</button>
              <div class="field-hint" style="margin-top:8px;">Paste this code just before the &lt;/body&gt; tag in your index.html, and remove the old feedback script.</div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- â•â•â• SETTINGS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="tab" id="tab-settings">

      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">Change Password</div>
            <div class="panel-head-sub">Protect your admin panel</div>
          </div>
        </div>
        <div class="panel-body">
          <div class="field-row">
            <div class="field">
              <label>New Password</label>
              <input type="password" id="newPass" placeholder="Enter new password">
            </div>
            <div class="field">
              <label>Confirm Password</label>
              <input type="password" id="confirmPass" placeholder="Repeat new password">
            </div>
          </div>
          <button class="btn btn-primary" onclick="changePassword()">Update Password</button>
          <div class="field-hint" style="margin-top:10px;">âš  Change the default password right away! Your GitHub repo is public â€” anyone can find admin.html.</div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">Data Backup</div>
            <div class="panel-head-sub">Export or import all your admin data</div>
          </div>
        </div>
        <div class="panel-body">
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:14px;">
            <button class="btn btn-ghost" onclick="exportData()">â¬‡ Export All Data (JSON)</button>
            <button class="btn btn-ghost" onclick="document.getElementById('importFile').click()">â¬† Import Data</button>
            <button class="btn btn-danger" onclick="resetAll()">âš  Reset Everything</button>
          </div>
          <input type="file" id="importFile" accept=".json" style="display:none" onchange="importData(event)">
          <div class="field-hint">Export saves all your content and feedback as JSON. Import restores it. Reset wipes everything and reloads.</div>
        </div>
      </div>

      <!-- HOW TO UPDATE YOUR LIVE SITE -->
      <div class="panel" style="border-color:rgba(255,111,97,0.25);">
        <div class="panel-head" style="background:rgba(255,111,97,0.05);">
          <div class="panel-head-info">
            <div class="panel-head-title" style="color:var(--gold)">ğŸš€ How to Update Your Live Site</div>
            <div class="panel-head-sub">Read this â€” it explains why edits here don't instantly show on your portfolio</div>
          </div>
        </div>
        <div class="panel-body" style="font-size:13px;line-height:1.9;">
          <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px;margin-bottom:16px;">
            <div style="background:var(--navy);border:1px solid var(--border);padding:16px 18px;border-radius:2px;">
              <div style="font-size:9px;letter-spacing:.2em;text-transform:uppercase;color:var(--green);margin-bottom:8px;">âœ“ Works automatically</div>
              <div style="font-size:13px;color:var(--white-pure);margin-bottom:4px;">Feedback Inbox</div>
              <div style="font-size:11px;color:rgba(184,214,238,0.4);">Feedback from visitors goes straight to Supabase and appears here instantly. No action needed.</div>
            </div>
            <div style="background:var(--navy);border:1px solid rgba(251,191,36,0.22);padding:16px 18px;border-radius:2px;">
              <div style="font-size:9px;letter-spacing:.2em;text-transform:uppercase;color:var(--amber);margin-bottom:8px;">âš  Requires manual step</div>
              <div style="font-size:13px;color:var(--white-pure);margin-bottom:4px;">Text & Photo Edits</div>
              <div style="font-size:11px;color:rgba(184,214,238,0.4);">Changes to hero name, bio, photo, projects, skills etc. are saved here as a draft. You must copy them into your <code style="font-family:var(--mono)">index.html</code> on GitHub.</div>
            </div>
          </div>
          <div style="background:rgba(74,222,128,0.06);border:1px solid rgba(74,222,128,0.18);padding:14px 18px;border-radius:2px;">
            <div style="font-size:11px;font-weight:600;color:var(--green);margin-bottom:6px;">Step-by-step: How to update your live portfolio photo</div>
            <ol style="font-size:12px;color:rgba(184,214,238,0.65);padding-left:20px;line-height:2.1;">
              <li>Upload your photo to <strong style="color:var(--white-pure)">imgur.com</strong> (free, no login needed for basic upload)</li>
              <li>Right-click the uploaded image â†’ <strong style="color:var(--white-pure)">Copy image address</strong> (must end in .jpg / .png)</li>
              <li>Go to <strong style="color:var(--white-pure)">Hero & Profile</strong> tab â†’ paste URL â†’ click <strong style="color:var(--white-pure)">âœ“ Apply</strong></li>
              <li>Click <strong style="color:var(--white-pure)">âœ“ Save Hero Section</strong></li>
              <li>Click <strong style="color:var(--white-pure)">ğŸ“‹ Copy Code for index.html</strong> â€” then paste the photo URL into your index.html on GitHub</li>
            </ol>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head">
          <div class="panel-head-info">
            <div class="panel-head-title">âš™ï¸ System Information</div>
            <div class="panel-head-sub">Current admin panel status</div>
          </div>
          <button class="btn btn-ghost btn-sm" onclick="toggleSysInfo()">â–¼ Expand</button>
        </div>
        <div class="panel-body" id="sysInfoBody" style="font-size:13px;line-height:1.9;color:rgba(184,214,238,0.55);">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;">
            <div style="background:var(--navy);border:1px solid var(--border);padding:16px 18px;border-radius:2px;">
              <div style="font-size:9px;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:8px;">Storage</div>
              <div style="font-size:13px;color:var(--white-pure);margin-bottom:4px;">Browser localStorage</div>
              <div style="font-size:11px;color:rgba(184,214,238,0.4);">Content edits are saved locally. Export regularly as JSON backup.</div>
            </div>
            <div style="background:var(--navy);border:1px solid var(--border);padding:16px 18px;border-radius:2px;">
              <div style="font-size:9px;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:8px;">Database</div>
              <div style="font-size:13px;color:var(--green);margin-bottom:4px;" id="sysDbStatus">â˜ Supabase Connected</div>
              <div style="font-size:11px;color:rgba(184,214,238,0.4);">Feedback goes to cloud â€” visible from any device.</div>
            </div>
            <div style="background:var(--navy);border:1px solid var(--border);padding:16px 18px;border-radius:2px;">
              <div style="font-size:9px;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:8px;">Keyboard Shortcuts</div>
              <div style="font-size:12px;color:rgba(184,214,238,0.6);line-height:2;">
                <code style="background:rgba(100,149,237,0.1);padding:2px 6px;border-radius:2px;font-family:var(--mono);">Ctrl+S</code> Save all changes<br>
                <code style="background:rgba(100,149,237,0.1);padding:2px 6px;border-radius:2px;font-family:var(--mono);">Esc</code> Close open modals
              </div>
            </div>
            <div style="background:var(--navy);border:1px solid var(--border);padding:16px 18px;border-radius:2px;">
              <div style="font-size:9px;letter-spacing:.2em;text-transform:uppercase;color:var(--gold);margin-bottom:8px;">Supabase Project</div>
              <div style="font-size:11px;color:rgba(184,214,238,0.6);word-break:break-all;font-family:var(--mono);">nrobcrcikaaldubklpdu.supabase.co</div>
              <div style="font-size:11px;color:rgba(184,214,238,0.3);margin-top:4px;">Key expires: Feb 2036</div>
            </div>
          </div>
          <div style="background:rgba(251,191,36,0.07);border:1px solid rgba(251,191,36,0.18);padding:14px 18px;font-size:12px;color:rgba(251,191,36,0.75);line-height:1.7;">
            âš  <strong>Important:</strong> Content edits (hero text, projects, skills) here are saved locally as a reference â€” you still need to update your <code style="font-family:var(--mono);">index.html</code> manually to apply changes to your live portfolio. Feedback however goes directly to/from Supabase.
          </div>
        </div>
      </div>

    </div>

  </div><!-- /content -->
</div><!-- /main -->

<!-- â•â• MODALS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<!-- Project Modal -->
<div class="modal-overlay hidden" id="projectModal">
  <div class="modal">
    <div class="modal-head">
      <div class="modal-title" id="projectModalTitle">Add New Project</div>
      <div class="modal-close" onclick="closeModal('projectModal')">âœ•</div>
    </div>
    <div class="modal-body">
      <input type="hidden" id="pEditIdx">
      <div class="field-row">
        <div class="field">
          <label>Emoji / Icon</label>
          <input type="text" id="pEmoji" placeholder="ğŸŒ¿">
        </div>
        <div class="field">
          <label>Category</label>
          <input type="text" id="pCat" placeholder="Photography, Finance, Tech...">
        </div>
      </div>
      <div class="field">
        <label>Project Title</label>
        <input type="text" id="pTitle" placeholder="My Awesome Project">
      </div>
      <div class="field">
        <label>Description</label>
        <textarea id="pDesc" rows="3" placeholder="What is this project about?"></textarea>
      </div>
      <div class="field">
        <label>Tags (comma-separated)</label>
        <input type="text" id="pTags" placeholder="HTML, CSS, JavaScript">
      </div>
      <div class="field">
        <label>Live Link <span class="field-optional">(optional)</span></label>
        <input type="url" id="pLink" placeholder="https://github.com/you/project">
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('projectModal')">Cancel</button>
      <button class="btn btn-primary" onclick="saveProject()">Save Project</button>
    </div>
  </div>
</div>

<!-- Learning Modal -->
<div class="modal-overlay hidden" id="learningModal">
  <div class="modal" style="width:560px;max-width:96vw;">
    <div class="modal-head">
      <div class="modal-title" id="learningModalTitle">Add Skill</div>
      <div class="modal-close" onclick="closeModal('learningModal')">âœ•</div>
    </div>
    <div class="modal-body">
      <input type="hidden" id="lEditIdx">
      <div class="field-row">
        <div class="field">
          <label>Emoji</label>
          <input type="text" id="lIcon" placeholder="ğŸ“š">
        </div>
        <div class="field">
          <label>Subject Name</label>
          <input type="text" id="lSubj" placeholder="Python Programming">
        </div>
      </div>
      <div class="field">
        <label>Description</label>
        <textarea id="lDesc" rows="3" placeholder="Brief description of what you're learning..."></textarea>
      </div>
      <div class="field">
        <label>Level Label</label>
        <input type="text" id="lLevel" placeholder="Beginner â†’ Intermediate">
      </div>
      <div class="field">
        <label>Progress</label>
        <div style="display:flex;align-items:center;gap:14px;margin-bottom:10px;">
          <input type="range" id="lProg" min="0" max="100" value="50" style="flex:1;accent-color:var(--blue);height:6px;cursor:pointer;"
            oninput="document.getElementById('lProgVal').textContent=this.value; document.getElementById('lProgBar').style.width=this.value+'%'; document.getElementById('lProgNum').textContent=this.value+'%';">
          <div style="min-width:52px;text-align:right;">
            <span id="lProgNum" style="font-family:var(--mono);font-size:18px;font-weight:700;color:var(--gold);">50%</span>
          </div>
          <input type="number" id="lProgVal" min="0" max="100" value="50" style="width:64px;background:var(--navy);border:1px solid var(--border);color:var(--white-pure);padding:7px 10px;font-family:var(--mono);font-size:14px;text-align:center;outline:none;border-radius:2px;"
            oninput="if(this.value>100)this.value=100;if(this.value<0)this.value=0;document.getElementById('lProg').value=this.value;document.getElementById('lProgBar').style.width=this.value+'%';document.getElementById('lProgNum').textContent=this.value+'%';">
        </div>
        <div style="background:var(--navy);border-radius:2px;height:8px;overflow:hidden;margin-top:4px;">
          <div id="lProgBar" style="height:100%;width:50%;background:linear-gradient(90deg,var(--blue),var(--blue-wash));border-radius:2px;transition:width .2s;"></div>
        </div>
        <div style="display:flex;justify-content:space-between;margin-top:4px;">
          <span style="font-size:9px;color:rgba(120,180,220,0.3);">0%</span>
          <span style="font-size:9px;color:rgba(120,180,220,0.3);">50%</span>
          <span style="font-size:9px;color:rgba(120,180,220,0.3);">100%</span>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('learningModal')">Cancel</button>
      <button class="btn btn-primary" onclick="saveLearning()">Save Skill</button>
    </div>
  </div>
</div>

<!-- Now/Next Item Modal -->
<div class="modal-overlay hidden" id="nownextModal">
  <div class="modal" style="width:480px;">
    <div class="modal-head">
      <div class="modal-title" id="nownextModalTitle">Add Now Item</div>
      <div class="modal-close" onclick="closeModal('nownextModal')">âœ•</div>
    </div>
    <div class="modal-body">
      <input type="hidden" id="nnType">
      <input type="hidden" id="nnEditIdx">
      <div class="field">
        <label>Title / Headline</label>
        <input type="text" id="nnTitle" placeholder="Learning Finnish & Spanish">
      </div>
      <div class="field">
        <label>Details</label>
        <textarea id="nnText" rows="4" placeholder="Describe what you're doing or planning..."></textarea>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('nownextModal')">Cancel</button>
      <button class="btn btn-primary" onclick="saveNowNext()">Save</button>
    </div>
  </div>
</div>

<!-- Feedback View Modal -->
<div class="modal-overlay hidden" id="fbModal">
  <div class="modal">
    <div class="modal-head">
      <div class="modal-title">Feedback Detail</div>
      <div class="modal-close" onclick="closeModal('fbModal')">âœ•</div>
    </div>
    <div class="modal-body" id="fbModalBody"></div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('fbModal')">Close</button>
    </div>
  </div>
</div>

<div class="toast-wrap" id="toastWrap"></div>

<!-- Scroll to Top -->
<button id="scrollTopBtn" onclick="window.scrollTo({top:0,behavior:'smooth'})"
  style="display:none;position:fixed;bottom:80px;right:22px;z-index:999;width:40px;height:40px;
  background:var(--navy-mid);border:1px solid var(--border-hi);color:var(--blue-pale);
  font-size:16px;cursor:pointer;border-radius:2px;transition:all .2s;box-shadow:0 4px 16px rgba(0,0,0,0.3);"
  title="Back to top">â†‘</button>

<script>
// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  CONFIG & STATE                                              â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const STORAGE_KEY  = 'om_admin_data';
const FB_KEY       = 'om_feedbacks';
const SB_KEY       = 'om_supabase';
const PASS_DEFAULT = 'admin123';

let state = {
  password: PASS_DEFAULT,
  hero: {
    name:'Om Prakash', sub:'Student Â· Creator Â· Explorer',
    location:'Bharatpur, Chitwan Â· Nepal',
    tagline:'A 17-year-old from Nepal with a passion for finance, AI, robotics, natural photography, chess, and anything that challenges the mind. Dreaming big, learning every day, and building toward something extraordinary.',
    badge:'17', photo:'', cta1:'Explore My Work', cta2:'About Me'
  },
  gallery: [
    { src:'1.jpg', caption:'Portrait' },
    { src:'2.jpg', caption:'Landscape' },
    { src:'3.jpg', caption:'Mountains' },
    { src:'5jpg.jpg', caption:'Village' },
    { src:'6.jpg', caption:'Sky' },
    { src:'7.jpg', caption:'Sunset' },
    { src:'20251110_095653.jpg', caption:'' },
    { src:'FB_IMG_17720724405931.jpg', caption:'' },
    { src:'IMG-20251113-WA0009.jpg', caption:'Family' },
  ],
  projects: [
    { id:1, emoji:'ğŸŒ¿', cat:'Photography', title:'Natural Photography', desc:'Capturing the raw beauty of Nepal â€” landscapes, wildlife, and everyday life through my lens.', tags:'Photography, Nature, Canon', link:'' },
    { id:2, emoji:'ğŸ“ˆ', cat:'Finance', title:'Market Research Notes', desc:'Personal deep-dives into Nepali stock market trends, company analyses, and economic patterns.', tags:'Finance, NEPSE, Research', link:'' },
    { id:3, emoji:'â™Ÿï¸', cat:'Chess', title:'Chess & Strategy', desc:'An avid chess player who studies openings, endgames, and positional strategies.', tags:'Chess, Strategy, Analysis', link:'' },
    { id:4, emoji:'ğŸŒ', cat:'Web Development', title:'This Website â€” Built with AI', desc:'Designed and built this portfolio using Claude AI as a creative and technical partner.', tags:'HTML, CSS, AI-Assisted, Claude', link:'https://omprakashpuri579.github.io/website/' },
  ],
  nownext: {
    now: [
      { id:1, title:'Learning Languages', text:'Currently studying Finnish and Spanish â€” two very different languages that keep my brain sharp and open doors to new cultures.' },
      { id:2, title:'Mastering Prompt Engineering', text:'Exploring advanced techniques to interact with AI models more effectively. This skill is quietly becoming one of the most valuable in tech.' },
      { id:3, title:'Building This Website', text:'Learning HTML, CSS, and programming fundamentals while building this portfolio â€” using AI as a learning partner and creative collaborator.' },
    ],
    next: [
      { id:1, title:'Going Abroad for Higher Studies', text:'I am planning to go abroad for further studies â€” somewhere that can offer me the best environment to grow academically and personally.' },
      { id:2, title:'Studying Finance & AI', text:'My core academic interests lie at the intersection of finance and artificial intelligence â€” understanding how money moves, how markets think, and how AI is reshaping both.' },
      { id:3, title:'Embracing a New Chapter', text:'Moving abroad at a young age is bold, but so is every dream worth chasing. The world is wide, the opportunities are real.' },
    ],
    tags: 'Abroad âœˆï¸, Higher Education, Finance, AI & Robotics'
  },
  learning: [
    { id:1, icon:'ğŸŒ', subj:'Finnish & Spanish', desc:'Learning both Finnish and Spanish â€” two fascinating languages that open completely different doors.', level:'Active Learner â€” Conversational Goal', progress:52 },
    { id:2, icon:'ğŸ¤–', subj:'Prompt Engineering', desc:'Exploring advanced techniques to interact with AI models more effectively.', level:'Intermediate â€” Rapidly Growing', progress:68 },
    { id:3, icon:'ğŸ§©', subj:"Rubik's Cube Solving", desc:"Not just the standard 3Ã—3 â€” I've mastered multiple cube types including the 2Ã—2, 3Ã—3, 4Ã—4, Mirror Cube, and Pyraminx.", level:'Advanced â€” Multi-Cube Solver', progress:88 },
    { id:4, icon:'â˜ï¸', subj:'Cloud Computing', desc:'Recently completed the Google Cloud Arcade program and earned the Cloud Legend title.', level:'Google Cloud Legend âœ¦', progress:74 },
    { id:5, icon:'ğŸ’»', subj:'HTML, CSS & Programming', desc:'Learning the building blocks of the web â€” writing real code, understanding how design and logic come together.', level:'Beginner â†’ Intermediate', progress:44 },
    { id:6, icon:'â™Ÿï¸', subj:'Chess & Strategic Thinking', desc:'Chess is more than a game â€” it\'s a language of logic. I study openings, endgames, and positional strategy.', level:'Passionate Player â€” Ongoing', progress:60 },
  ],
  about: {
    p1:"Hi, I'm Om Prakash Puri â€” a 17-year-old student from Bharatpur, Chitwan, Nepal. I passed my SEE examinations in 2080 B.S. with a GPA of 3.69.",
    p2:"My interests sit at the crossroads of finance, AI, and robotics â€” fields that I believe will define the coming decades. But beyond academics, I'm drawn to anything that challenges my mind: chess, Rubik's cubes, natural photography, and now â€” building things on the web.",
    p3:"I am planning to go abroad for further studies â€” a dream I am quietly working toward every single day. I don't know exactly how or when it will happen, but I believe in the process.",
    p4:"I'm still at the beginning of my professional journey, but I believe that curiosity, consistency, and courage matter more than experience at this stage.",
    skills:'Finance, Artificial Intelligence, Cloud Computing, Prompt Engineering, Chess, Natural Photography, Rubik\'s Cube, Finnish & Spanish, HTML & CSS, Robotics',
    photo:'IMG-20251113-WA0009.jpg',
    location:'Bharatpur, Chitwan, Nepal'
  },
  contact: {
    email:'omprakashpui579@gmail.com', phone:'+977 9706435866',
    insta:'@omprakashpuri579', instaUrl:'https://www.instagram.com/omprakashpuri579',
    linkedin:'Om Prakash Puri', linkedinUrl:'https://www.linkedin.com/in/om-prakash-puri/',
    github:'omprakashpuri579', city:'Bharatpur, Nepal'
  },
  feedback: []
};

// â”€â”€ SUPABASE (pre-filled, auto-connects on load) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SB_DEFAULT_URL = 'https://nrobcrcikaaldubklpdu.supabase.co';
const SB_DEFAULT_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yb2JjcmNpa2FhbGR1YmtscGR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIyNDg1MzUsImV4cCI6MjA4NzgyNDUzNX0.QhCf5AzV20lyROu0kQmYEzb7s7HHXzo-Uu0BkxTYe80';
let supabase = { url: SB_DEFAULT_URL, key: SB_DEFAULT_KEY, connected: true };
let fbFilter = 'all';
let fbSort = 'newest';
let sidebarCollapsed = false;

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  INIT                                                        â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function init() {
  const saved = localStorage.getItem(STORAGE_KEY);
  if (saved) {
    try {
      const parsed = JSON.parse(saved);
      state = deepMerge(state, parsed);
      // Clear base64 marker â€” photo can't be restored after page reload
      // User must re-apply URL or re-upload
      if (state.hero && state.hero.photo === '__b64__') {
        state.hero.photo = '';
        toast('Profile photo was a local upload â€” please re-apply the image URL to restore it.', 'info');
      }
    } catch(e){ console.warn('State load error:', e); }
  }

  const sbSaved = localStorage.getItem(SB_KEY);
  if (sbSaved) {
    try {
      const parsed = JSON.parse(sbSaved);
      // Only override defaults if a custom URL was saved
      if (parsed.url) supabase = parsed;
    } catch(e){}
  }
  // Always ensure defaults are populated if still empty
  if (!supabase.url) supabase.url = SB_DEFAULT_URL;
  if (!supabase.key) supabase.key = SB_DEFAULT_KEY;

  if (sessionStorage.getItem('admin_ok') === '1') {
    document.getElementById('lockScreen').classList.add('hidden');
    onUnlocked();
  }

  window.addEventListener('storage', e => {
    if (e.key === FB_KEY) { loadLocalFeedback(); renderFeedback(); renderDashboard(); }
  });
  loadLocalFeedback();
}

function deepMerge(target, source) {
  const out = { ...target };
  for (const k in source) {
    if (source[k] && typeof source[k] === 'object' && !Array.isArray(source[k])) {
      out[k] = deepMerge(target[k] || {}, source[k]);
    } else {
      out[k] = source[k];
    }
  }
  return out;
}

function onUnlocked() {
  renderAll();
  updateDbStatus();
  // Always try to sync since Supabase is hardcoded
  syncFeedback();
  // Auto-refresh every 60 seconds
  setInterval(() => { if (supabase.connected) syncFeedback(); }, 60000);
}

function saveData() {
  try {
    // Strip huge base64 photos before saving to localStorage to avoid quota errors
    const toSave = JSON.parse(JSON.stringify(state));
    if (toSave.hero && toSave.hero.photo && toSave.hero.photo.startsWith('data:') && toSave.hero.photo.length > 500000) {
      // Base64 photo too big for localStorage â€” save placeholder
      toSave.hero._photoB64 = toSave.hero.photo; // keep in memory only
      toSave.hero.photo = '__b64__'; // marker
    }
    localStorage.setItem(STORAGE_KEY, JSON.stringify(toSave));
  } catch(e) {
    // Quota exceeded â€” try saving without gallery data (strip base64 items)
    try {
      const slim = JSON.parse(JSON.stringify(state));
      slim.gallery = slim.gallery.map(g => g.src && g.src.startsWith('data:') ? { src: g.caption || 'local-file', caption: g.caption } : g);
      if (slim.hero && slim.hero.photo && slim.hero.photo.startsWith('data:')) slim.hero.photo = '';
      localStorage.setItem(STORAGE_KEY, JSON.stringify(slim));
      toast('Saved (photos excluded â€” too large for browser storage)', 'info');
    } catch(e2) {
      toast('Save failed â€” browser storage full. Use Export to backup.', 'err');
    }
  }
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  AUTH                                                        â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function unlock() {
  const val = document.getElementById('lockInput').value;
  const pass = state.password || PASS_DEFAULT;
  if (val === pass) {
    document.getElementById('lockScreen').classList.add('hidden');
    sessionStorage.setItem('admin_ok', '1');
    onUnlocked();
  } else {
    document.getElementById('lockError').textContent = 'âœ• Wrong password. Try again.';
    document.getElementById('lockInput').value = '';
    setTimeout(() => document.getElementById('lockError').textContent = '', 3000);
  }
}

function changePassword() {
  const np = document.getElementById('newPass').value;
  const cp = document.getElementById('confirmPass').value;
  if (!np) return toast('Enter a new password', 'err');
  if (np !== cp) return toast('Passwords do not match', 'err');
  state.password = np;
  saveData();
  document.getElementById('newPass').value = '';
  document.getElementById('confirmPass').value = '';
  toast('Password updated!');
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  NAVIGATION                                                  â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TAB_TITLES = {
  dashboard: 'Dashboard',  hero: 'Hero & Profile',  gallery: 'Photo Gallery',
  projects: 'Projects',  nownext: 'Now & Next',  learning: 'Learning & Skills',
  about: 'About Me',  contact: 'Contact Info',  feedback: 'Feedback Inbox',
  database: 'Database Setup',  settings: 'Settings'
};

function switchTab(name) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  const tab = document.getElementById('tab-' + name);
  if (tab) tab.classList.add('active');
  const nav = document.querySelector(`[data-tab="${name}"]`);
  if (nav) nav.classList.add('active');
  document.getElementById('topbarTitle').textContent = TAB_TITLES[name] || name;
  document.getElementById('breadcrumb').textContent = TAB_TITLES[name] || name;
}

function toggleSidebar() {
  sidebarCollapsed = !sidebarCollapsed;
  document.getElementById('sidebar').classList.toggle('collapsed', sidebarCollapsed);
  document.getElementById('main').classList.toggle('expanded', sidebarCollapsed);
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  RENDER ALL                                                  â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderAll() {
  renderDashboard();
  renderHero();
  renderGallery();
  renderProjects();
  renderNowNext();
  renderLearning();
  renderAbout();
  renderContact();
  renderFeedback();
  document.getElementById('sbUrl').value = supabase.url || '';
  document.getElementById('sbKey').value = supabase.key || '';
  if (supabase.url) generateIndexCode();
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  DASHBOARD                                                   â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderDashboard() {
  const unread = state.feedback.filter(f => !f.read).length;
  document.getElementById('st-total').textContent = state.feedback.length;
  document.getElementById('st-unread').textContent = unread;
  document.getElementById('st-projects').textContent = state.projects.length;
  document.getElementById('st-skills').textContent = state.learning.length;
  const rated = state.feedback.filter(f => f.rating > 0);
  const avg = rated.length ? (rated.reduce((s,f) => s + f.rating, 0) / rated.length).toFixed(1) : 'â€”';
  document.getElementById('st-rating').textContent = avg;
  const badge = document.getElementById('unreadBadge');
  badge.textContent = unread; badge.style.display = unread > 0 ? '' : 'none';
  const el = document.getElementById('dash-recent');
  const recent = state.feedback.slice(0,3);
  el.innerHTML = recent.length ? recent.map(f => fbCardHTML(f, true)).join('') :
    '<div class="empty"><div class="empty-icon">ğŸ’¬</div><div class="empty-msg">No feedback yet. Share your portfolio!</div></div>';
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  HERO                                                        â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setHeroPhotoPreview(src) {
  const img = document.getElementById('heroPhotoPreview');
  const holder = document.getElementById('heroPPHolder');
  const statusEl = document.getElementById('photoUrlStatus');
  if (src) {
    img.src = src;
    img.style.display = 'block';
    holder.style.display = 'none';
    if (statusEl) statusEl.style.display = 'none';
  } else {
    img.src = '';
    img.style.display = 'none';
    holder.style.display = 'flex';
    if (statusEl) statusEl.style.display = 'none';
  }
}

function renderHero() {
  const h = state.hero;
  document.getElementById('heroName').value     = h.name     || '';
  document.getElementById('heroSub').value      = h.sub      || '';
  document.getElementById('heroLocation').value = h.location || '';
  document.getElementById('heroTagline').value  = h.tagline  || '';
  document.getElementById('heroBadge').value    = h.badge    || '';
  document.getElementById('heroCta1').value     = h.cta1     || '';
  document.getElementById('heroCta2').value     = h.cta2     || '';
  // Resolve photo: use in-memory b64 if available, else url
  const photoSrc = (h.photo === '__b64__' && h._photoB64) ? h._photoB64 : (h.photo || '');
  document.getElementById('heroPhotoUrl').value = (photoSrc && !photoSrc.startsWith('data:')) ? photoSrc : '';
  setHeroPhotoPreview(photoSrc);
}

function handleHeroPhoto(input) {
  const file = input.files[0];
  if (!file) return;
  // Show size warning for huge files
  if (file.size > 5 * 1024 * 1024) {
    toast('File is large (>5MB). Use an image URL for the live site.', 'info');
  }
  const reader = new FileReader();
  reader.onload = e => {
    state.hero.photo = e.target.result; // base64 preview
    setHeroPhotoPreview(e.target.result);
    document.getElementById('heroPhotoUrl').value = '';
    saveData();
    toast('Photo preview loaded! âœ“ Now save and copy code to index.html.');
  };
  reader.readAsDataURL(file);
  // Reset input so same file can be re-chosen
  input.value = '';
}

function applyHeroPhotoUrl() {
  const url = document.getElementById('heroPhotoUrl').value.trim();
  const statusEl = document.getElementById('photoUrlStatus');
  if (!url) { toast('Paste a URL first', 'err'); return; }

  // Show testing status
  statusEl.style.display = 'block';
  statusEl.style.background = 'rgba(251,191,36,0.08)';
  statusEl.style.border = '1px solid rgba(251,191,36,0.2)';
  statusEl.style.color = 'var(--amber)';
  statusEl.textContent = 'â³ Testing image URL...';

  // Test image loads
  const testImg = new Image();
  testImg.onload = () => {
    state.hero.photo = url;
    state.hero._photoB64 = null; // clear any old upload
    setHeroPhotoPreview(url);
    saveData();
    statusEl.style.background = 'rgba(74,222,128,0.07)';
    statusEl.style.border = '1px solid rgba(74,222,128,0.22)';
    statusEl.style.color = 'var(--green)';
    statusEl.textContent = 'âœ“ Image loaded! Save hero section, then copy the URL into your index.html.';
    toast('Photo URL applied âœ“');
  };
  testImg.onerror = () => {
    statusEl.style.background = 'rgba(248,113,113,0.08)';
    statusEl.style.border = '1px solid rgba(248,113,113,0.2)';
    statusEl.style.color = 'var(--red)';
    statusEl.textContent = 'âœ• Cannot load this URL. It must be a direct image link (ending in .jpg, .png, .webp). Try imgur.com.';
    toast('Image URL failed to load', 'err');
  };
  testImg.src = url + '?t=' + Date.now(); // bust cache
}

function clearHeroPhoto() {
  state.hero.photo = '';
  state.hero._photoB64 = null;
  setHeroPhotoPreview('');
  document.getElementById('heroPhotoUrl').value = '';
  const statusEl = document.getElementById('photoUrlStatus');
  if (statusEl) statusEl.style.display = 'none';
  saveData();
  toast('Photo removed');
}

function previewHeroCode() {
  const h = state.hero;
  const photoSrc = (h.photo && !h.photo.startsWith('data:')) ? h.photo : 'âš  Paste an image URL above first';
  const code = `/* â”€â”€ Paste these values into your index.html â”€â”€ */

/* Hero photo src â€” find <img> with class "hero-photo" or similar */
Photo URL: ${photoSrc}

/* Hero name */
${h.name || ''}

/* Hero subtitle */
${h.sub || ''}

/* Location line */
${h.location || ''}

/* Tagline / bio */
${h.tagline || ''}

/* Badge text */
${h.badge || ''}

/* CTA buttons */
Button 1: ${h.cta1 || ''}
Button 2: ${h.cta2 || ''}`;
  document.getElementById('heroCodePre').textContent = code;
  document.getElementById('heroCodeOut').style.display = 'block';
  toast('Code preview ready â€” copy it!', 'info');
}

function copyHeroCode() {
  const text = document.getElementById('heroCodePre').textContent;
  navigator.clipboard.writeText(text).then(() => toast('Copied to clipboard!')).catch(() => toast('Select text manually', 'err'));
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  GALLERY                                                     â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderGallery() {
  const grid = document.getElementById('galleryGrid');
  if (!state.gallery.length) {
    grid.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:32px;color:rgba(120,180,220,0.3);font-size:13px;">No photos yet â€” add filenames or URLs above.</div>';
    return;
  }
  grid.innerHTML = state.gallery.map((item,i) => {
    const isUrl  = item.src.startsWith('http') || item.src.startsWith('data:');
    const label  = item.caption || item.src;
    const short  = label.length > 18 ? label.substring(0,16)+'â€¦' : label;
    return `
    <div class="gallery-item" style="position:relative;">
      <img src="${item.src}" alt="${item.caption||''}"
        style="width:100%;height:100%;object-fit:cover;display:block;"
        onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
      <div style="display:none;position:absolute;inset:0;background:var(--navy-light);flex-direction:column;align-items:center;justify-content:center;gap:4px;">
        <div style="font-size:24px;opacity:.3;">ğŸ–¼ï¸</div>
        <div style="font-size:9px;color:rgba(120,180,220,0.4);text-align:center;padding:0 6px;">${item.src}</div>
      </div>
      <!-- filename label at bottom -->
      <div style="position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,0.72);padding:5px 7px;font-size:9px;color:rgba(200,220,240,0.8);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;" title="${label}">${short}</div>
      <!-- action overlay on hover -->
      <div class="gallery-item-overlay" style="flex-direction:column;gap:6px;">
        <button class="btn btn-ghost btn-xs" onclick="event.stopPropagation();moveGallery(${i},-1)" title="Move up">â†‘</button>
        <button class="btn btn-danger btn-xs" onclick="event.stopPropagation();removeGallery(${i})" title="Remove">âœ•</button>
        <button class="btn btn-ghost btn-xs" onclick="event.stopPropagation();moveGallery(${i},1)" title="Move down">â†“</button>
      </div>
    </div>`;
  }).join('');
}

function handleGalleryUpload(input) {
  // For file uploads â€” use just the filename as src (will work on GitHub Pages)
  Array.from(input.files).forEach(file => {
    const filename = file.name;
    const caption  = filename.replace(/\.[^/.]+$/,'');
    // Check not already added
    if (state.gallery.find(g => g.src === filename)) {
      toast(`${filename} already in gallery`, 'info'); return;
    }
    state.gallery.push({ src: filename, caption });
    saveData(); renderGallery();
    toast(`Added: ${filename}`);
  });
  input.value = '';
}

function addGalleryItemByUrl() {
  const src     = document.getElementById('galleryAddInput').value.trim();
  const caption = document.getElementById('galleryAddCaption').value.trim();
  if (!src) return toast('Enter a filename or URL', 'err');
  if (state.gallery.find(g => g.src === src)) return toast('Already in gallery', 'info');
  state.gallery.push({ src, caption });
  saveData(); renderGallery();
  document.getElementById('galleryAddInput').value = '';
  document.getElementById('galleryAddCaption').value = '';
  toast('Photo added to gallery âœ“');
}

function removeGallery(i) {
  const removed = state.gallery[i].src;
  state.gallery.splice(i,1);
  saveData(); renderGallery();
  toast(`Removed: ${removed}`);
}

function moveGallery(i, dir) {
  const j = i + dir;
  if (j < 0 || j >= state.gallery.length) return;
  [state.gallery[i], state.gallery[j]] = [state.gallery[j], state.gallery[i]];
  saveData(); renderGallery();
}

function previewGalleryCode() {
  const lines = state.gallery.map(g => `  { src:'${g.src}', caption:'${g.caption||''}' },`).join('\n');
  const code = `/* â”€â”€ Gallery items â€” paste into your index.html gallery array â”€â”€ */\nconst galleryItems = [\n${lines}\n];`;
  document.getElementById('galleryCodePre').textContent = code;
  document.getElementById('galleryCodeOut').style.display = 'block';
  toast('Gallery code ready â€” copy it!', 'info');
}

function copyGalleryCode() {
  navigator.clipboard.writeText(document.getElementById('galleryCodePre').textContent)
    .then(() => toast('Copied!')).catch(() => toast('Select text manually', 'err'));
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  PROJECTS                                                    â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderProjects() {
  const el = document.getElementById('projectList');
  if (!state.projects.length) {
    el.innerHTML = '<div class="empty"><div class="empty-icon">ğŸ’¼</div><div class="empty-msg">No projects yet. Click + Add Project to start.</div></div>';
    return;
  }
  el.innerHTML = state.projects.map((p,i) => `
    <div class="item-row">
      <div class="item-icon">${p.emoji||'ğŸ“'}</div>
      <div class="item-info">
        <div class="item-cat">${p.cat}</div>
        <div class="item-title">${p.title}</div>
        <div class="item-desc">${p.desc}</div>
        <div class="tags-wrap">${(p.tags||'').split(',').filter(Boolean).map(t=>`<span class="tag-pill">${t.trim()}</span>`).join('')}</div>
      </div>
      <div class="item-actions">
        ${p.link ? `<a href="${p.link}" target="_blank" class="btn btn-ghost btn-sm">â†—</a>` : ''}
        <button class="btn btn-ghost btn-sm" onclick="openProjectModal(${i})">âœ</button>
        <button class="btn btn-danger btn-sm" onclick="deleteProject(${i})">ğŸ—‘</button>
      </div>
    </div>
  `).join('');
}

function openProjectModal(idx) {
  document.getElementById('pEditIdx').value = idx !== undefined ? idx : '';
  document.getElementById('projectModalTitle').textContent = idx !== undefined ? 'Edit Project' : 'Add New Project';
  if (idx !== undefined) {
    const p = state.projects[idx];
    document.getElementById('pEmoji').value = p.emoji||'';
    document.getElementById('pCat').value = p.cat||'';
    document.getElementById('pTitle').value = p.title||'';
    document.getElementById('pDesc').value = p.desc||'';
    document.getElementById('pTags').value = p.tags||'';
    document.getElementById('pLink').value = p.link||'';
  } else {
    ['pEmoji','pCat','pTitle','pDesc','pTags','pLink'].forEach(id => document.getElementById(id).value='');
  }
  document.getElementById('projectModal').classList.remove('hidden');
}

function saveProject() {
  const idx = document.getElementById('pEditIdx').value;
  const proj = {
    id: Date.now(),
    emoji: document.getElementById('pEmoji').value || 'ğŸ“',
    cat:   document.getElementById('pCat').value,
    title: document.getElementById('pTitle').value,
    desc:  document.getElementById('pDesc').value,
    tags:  document.getElementById('pTags').value,
    link:  document.getElementById('pLink').value
  };
  if (!proj.title) return toast('Title is required', 'err');
  if (idx !== '') state.projects[parseInt(idx)] = { ...state.projects[parseInt(idx)], ...proj };
  else state.projects.push(proj);
  saveData(); renderProjects(); renderDashboard();
  closeModal('projectModal'); toast('Project saved!');
}

function deleteProject(i) {
  if (!confirm('Delete this project?')) return;
  state.projects.splice(i,1); saveData(); renderProjects(); renderDashboard();
  toast('Project deleted');
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  NOW & NEXT                                                  â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderNowNext() {
  renderNowNextList('now');
  renderNowNextList('next');
  document.getElementById('nownextTags').value = state.nownext.tags || '';
}

function renderNowNextList(type) {
  const el = document.getElementById(type + 'List');
  const items = state.nownext[type];
  if (!items.length) {
    el.innerHTML = `<div class="empty"><div class="empty-icon">${type==='now'?'ğŸ”µ':'ğŸŸ¡'}</div><div class="empty-msg">No items yet.</div></div>`;
    return;
  }
  el.innerHTML = items.map((item,i) => `
    <div class="now-item-edit">
      <div class="${type === 'now' ? 'dot-color-now' : 'dot-color-next'}"></div>
      <div class="now-item-content">
        <div class="now-item-title">${item.title}</div>
        <div class="now-item-text">${item.text}</div>
      </div>
      <div class="now-item-actions">
        <button class="btn btn-ghost btn-xs" onclick="openNowNextModal('${type}',${i})">âœ</button>
        <button class="btn btn-danger btn-xs" onclick="deleteNowNext('${type}',${i})">âœ•</button>
      </div>
    </div>
  `).join('');
}

function openNowNextModal(type, idx) {
  document.getElementById('nnType').value = type;
  document.getElementById('nnEditIdx').value = idx !== undefined ? idx : '';
  document.getElementById('nownextModalTitle').textContent = (idx !== undefined ? 'Edit' : 'Add') + (type === 'now' ? ' Now' : ' Next') + ' Item';
  if (idx !== undefined) {
    const item = state.nownext[type][idx];
    document.getElementById('nnTitle').value = item.title || '';
    document.getElementById('nnText').value = item.text || '';
  } else {
    document.getElementById('nnTitle').value = '';
    document.getElementById('nnText').value = '';
  }
  document.getElementById('nownextModal').classList.remove('hidden');
}

function saveNowNext() {
  const type = document.getElementById('nnType').value;
  const idx = document.getElementById('nnEditIdx').value;
  const item = {
    id: Date.now(),
    title: document.getElementById('nnTitle').value,
    text: document.getElementById('nnText').value
  };
  if (!item.title) return toast('Title is required', 'err');
  if (idx !== '') state.nownext[type][parseInt(idx)] = item;
  else state.nownext[type].push(item);
  saveData(); renderNowNextList(type);
  closeModal('nownextModal'); toast('Saved!');
}

function deleteNowNext(type, i) {
  state.nownext[type].splice(i,1); saveData(); renderNowNextList(type);
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  LEARNING                                                    â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderLearning() {
  const el = document.getElementById('learningList');
  if (!state.learning.length) {
    el.innerHTML = '<div class="empty"><div class="empty-icon">ğŸ“š</div><div class="empty-msg">No skills added yet.</div></div>';
    return;
  }
  el.innerHTML = state.learning.map((l,i) => `
    <div class="item-row">
      <div class="item-icon">${l.icon||'ğŸ“š'}</div>
      <div class="item-info">
        <div class="item-title">${l.subj}</div>
        <div class="item-desc">${l.desc}</div>
        <div class="progress-mini" style="max-width:200px;margin-top:8px;">
          <div style="display:flex;justify-content:space-between;margin-bottom:4px;">
            <span style="font-size:10px;color:rgba(120,180,220,0.4);">${l.level}</span>
            <span style="font-size:10px;color:var(--gold);">${l.progress}%</span>
          </div>
          <div class="progress-mini-bar">
            <div class="progress-mini-fill" style="width:${l.progress}%"></div>
          </div>
        </div>
      </div>
      <div class="item-actions">
        <button class="btn btn-ghost btn-sm" onclick="openLearningModal(${i})">âœ</button>
        <button class="btn btn-danger btn-sm" onclick="deleteLearning(${i})">ğŸ—‘</button>
      </div>
    </div>
  `).join('');
}

function openLearningModal(idx) {
  document.getElementById('lEditIdx').value = idx !== undefined ? idx : '';
  document.getElementById('learningModalTitle').textContent = idx !== undefined ? 'Edit Skill' : 'Add Skill';
  if (idx !== undefined) {
    const l = state.learning[idx];
    document.getElementById('lIcon').value = l.icon||'';
    document.getElementById('lSubj').value = l.subj||'';
    document.getElementById('lDesc').value = l.desc||'';
    document.getElementById('lLevel').value = l.level||'';
    document.getElementById('lProg').value = l.progress||50;
    document.getElementById('lProgVal').value = l.progress||50;
    document.getElementById('lProgNum').textContent = (l.progress||50)+'%';
    document.getElementById('lProgBar').style.width = (l.progress||50)+'%';
  } else {
    ['lIcon','lSubj','lDesc','lLevel'].forEach(id => document.getElementById(id).value='');
    document.getElementById('lProg').value = 50;
    document.getElementById('lProgVal').value = 50;
    document.getElementById('lProgNum').textContent = '50%';
    document.getElementById('lProgBar').style.width = '50%';
  }
  document.getElementById('learningModal').classList.remove('hidden');
}

function saveLearning() {
  const idx = document.getElementById('lEditIdx').value;
  const item = {
    id: Date.now(),
    icon: document.getElementById('lIcon').value || 'ğŸ“š',
    subj: document.getElementById('lSubj').value,
    desc: document.getElementById('lDesc').value,
    level: document.getElementById('lLevel').value,
    progress: parseInt(document.getElementById('lProgVal').value || document.getElementById('lProg').value)
  };
  if (!item.subj) return toast('Subject name is required', 'err');
  if (idx !== '') state.learning[parseInt(idx)] = { ...state.learning[parseInt(idx)], ...item };
  else state.learning.push(item);
  saveData(); renderLearning(); renderDashboard();
  closeModal('learningModal'); toast('Skill saved!');
}

function deleteLearning(i) {
  if (!confirm('Delete this skill?')) return;
  state.learning.splice(i,1); saveData(); renderLearning(); renderDashboard();
  toast('Skill deleted');
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  ABOUT                                                       â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderAbout() {
  const a = state.about;
  document.getElementById('aboutP1').value       = a.p1       || '';
  document.getElementById('aboutP2').value       = a.p2       || '';
  document.getElementById('aboutP3').value       = a.p3       || '';
  document.getElementById('aboutP4').value       = a.p4       || '';
  document.getElementById('aboutSkills').value   = a.skills   || '';
  document.getElementById('aboutPhoto').value    = a.photo    || '';
  document.getElementById('aboutLocation').value = a.location || '';
}

function copyAboutText() {
  const a = state.about;
  const text = [
    a.p1 && `Paragraph 1:\n${a.p1}`,
    a.p2 && `\nParagraph 2:\n${a.p2}`,
    a.p3 && `\nParagraph 3:\n${a.p3}`,
    a.p4 && `\nParagraph 4:\n${a.p4}`,
    a.skills && `\nSkills: ${a.skills}`,
    a.photo  && `\nPhoto: ${a.photo}`,
  ].filter(Boolean).join('\n');
  navigator.clipboard.writeText(text).then(() => toast('About text copied!')).catch(() => toast('Copy failed', 'err'));
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  CONTACT                                                     â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderContact() {
  const c = state.contact;
  document.getElementById('ctEmail').value = c.email||'';
  document.getElementById('ctPhone').value = c.phone||'';
  document.getElementById('ctInsta').value = c.insta||'';
  document.getElementById('ctInstaUrl').value = c.instaUrl||'';
  document.getElementById('ctLinkedIn').value = c.linkedin||'';
  document.getElementById('ctLinkedInUrl').value = c.linkedinUrl||'';
  document.getElementById('ctGithub').value = c.github||'';
  document.getElementById('ctCity').value = c.city||'';

  const contactEntries = [
    { icon:'ğŸ’¼', label:'LinkedIn', val: c.linkedin || 'Not set', live: !!c.linkedinUrl },
    { icon:'ğŸ“·', label:'Instagram', val: c.insta || 'Not set', live: !!c.instaUrl },
    { icon:'âœ‰ï¸', label:'Email', val: c.email || 'Not set', live: !!c.email },
    { icon:'ğŸ“±', label:'Mobile', val: c.phone || 'Not set', live: !!c.phone },
  ];
  document.getElementById('contactPreviewList').innerHTML = contactEntries.map(e => `
    <div class="contact-preview">
      <div class="contact-preview-icon">${e.icon}</div>
      <div class="contact-preview-info">
        <div class="contact-preview-label">${e.label}</div>
        <div class="contact-preview-val">${e.val}</div>
      </div>
      <span class="contact-live">${e.live ? 'âœ“ Live' : 'â€”'}</span>
    </div>
  `).join('');
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  FEEDBACK                                                    â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadLocalFeedback() {
  const raw = localStorage.getItem(FB_KEY);
  if (!raw) return;
  try {
    const arr = JSON.parse(raw);
    let changed = false;
    arr.forEach(fb => {
      if (!state.feedback.find(f => f.id === fb.id)) {
        state.feedback.unshift({ ...fb, source: 'local' });
        changed = true;
      }
    });
    if (changed) saveData();
  } catch(e) {}
}

async function syncFeedback() {
  if (!supabase.connected) return loadLocalFeedback();
  try {
    const res = await fetch(`${supabase.url}/rest/v1/feedbacks?select=*&order=created_at.desc&limit=200`, {
      headers: { 'apikey': supabase.key, 'Authorization': 'Bearer ' + supabase.key }
    });
    if (!res.ok) throw new Error(res.statusText);
    const rows = await res.json();
    rows.forEach(row => {
      if (!state.feedback.find(f => String(f.id) === String(row.id))) {
        state.feedback.unshift({
          id: row.id, name: row.name, email: row.email||'', rating: row.rating,
          ratingLabel: row.rating_label||'', msg: row.msg||'', date: row.date||row.created_at,
          read: row.read||false, source: 'cloud'
        });
      }
    });
    saveData(); renderFeedback(); renderDashboard();
    toast('Feedback synced from cloud â˜', 'info');
  } catch(e) {
    toast('Sync failed: ' + e.message, 'err');
  }
}

function setFbFilter(f) {
  fbFilter = f;
  document.querySelectorAll('.fb-filter').forEach(btn => btn.classList.toggle('active', btn.dataset.filter === f));
  renderFeedback();
}

function setFbSort(s) { fbSort = s; renderFeedback(); }

function renderFeedback() {
  const el = document.getElementById('fbList');
  let items = [...state.feedback];
  if (fbFilter === 'unread') items = items.filter(f => !f.read);
  else if (fbFilter === 'read') items = items.filter(f => f.read);
  else if (fbFilter === '5star') items = items.filter(f => f.rating === 5);
  else if (fbFilter === 'cloud') items = items.filter(f => f.source === 'cloud');
  if (fbSort === 'oldest') items.reverse();
  else if (fbSort === 'rating') items.sort((a,b) => b.rating - a.rating);
  const total = state.feedback.length;
  const unread = state.feedback.filter(f => !f.read).length;
  document.getElementById('fbSubtitle').textContent = `${total} total Â· ${unread} unread`;
  if (!items.length) {
    el.innerHTML = '<div class="empty"><div class="empty-icon">ğŸ“­</div><div class="empty-msg">No feedback matches this filter.</div></div>';
    return;
  }
  el.innerHTML = items.map(f => fbCardHTML(f)).join('');
}

function fbCardHTML(f, mini = false) {
  const stars = Array.from({length:5},(_,i) =>
    `<span class="${i < f.rating ? 'fb-star-filled' : 'fb-star-empty'}">â˜…</span>`
  ).join('');
  const labels = ['','Poor','Fair','Good','Great','Excellent!'];
  const sourceLabel = f.source === 'cloud'
    ? '<span class="fb-source cloud">â˜ Cloud</span>'
    : '<span class="fb-source">ğŸ“± Local</span>';
  return `
    <div class="fb-card ${f.read ? 'read' : 'unread'}">
      <div class="fb-card-head">
        <div>
          <div class="fb-name">
            ${!f.read ? '<span class="fb-unread-dot"></span>' : ''}
            ${f.name}
          </div>
          <div class="fb-meta">${f.email ? f.email + ' Â· ' : ''}${f.date || ''}</div>
        </div>
        <div style="display:flex;gap:6px;align-items:center;">
          ${sourceLabel}
          ${mini ? '' : `<button class="btn btn-ghost btn-xs" onclick="viewFeedback(${f.id})">View</button>`}
        </div>
      </div>
      <div class="fb-rating">${stars}<span class="fb-rating-label">${labels[f.rating]||''}</span></div>
      ${f.msg ? `<div class="fb-msg">${f.msg}</div>` : '<div class="fb-msg color-muted"><em>No message</em></div>'}
      ${!mini ? `
        <div class="fb-actions">
          ${!f.read ? `<button class="btn btn-success btn-xs" onclick="markRead(${f.id})">âœ“ Mark Read</button>` : ''}
          ${f.email ? `<a class="btn btn-ghost btn-xs" href="mailto:${f.email}?subject=Re: Your feedback on my portfolio">Reply âœ‰</a>` : ''}
          <button class="btn btn-danger btn-xs" onclick="deleteFeedback(${f.id})">ğŸ—‘ Delete</button>
        </div>
      ` : ''}
    </div>
  `;
}

function viewFeedback(id) {
  const f = state.feedback.find(x => x.id == id); if (!f) return;
  const labels = ['','Poor','Fair','Good','Great','Excellent!'];
  document.getElementById('fbModalBody').innerHTML = `
    <div style="margin-bottom:16px;">
      <div style="font-size:18px;font-weight:700;color:var(--white-pure);margin-bottom:4px;">${f.name}</div>
      <div style="font-size:12px;color:rgba(120,180,220,0.4);">${f.email||'No email'} Â· ${f.date||''}</div>
    </div>
    <div style="display:flex;gap:4px;margin-bottom:16px;">
      ${Array.from({length:5},(_,i)=>`<span style="font-size:22px;color:${i<f.rating?'#FF6F61':'rgba(120,180,220,0.15)'}">â˜…</span>`).join('')}
      <span style="font-size:13px;color:rgba(255,111,97,0.7);margin-left:8px;align-self:center;">${labels[f.rating]||''}</span>
    </div>
    <div style="font-size:14px;line-height:1.8;color:rgba(208,232,248,0.75);">${f.msg||'<em style="opacity:.4">No message provided</em>'}</div>
    <div style="margin-top:20px;display:flex;gap:8px;">
      ${!f.read ? `<button class="btn btn-success btn-sm" onclick="markRead(${f.id});closeModal('fbModal')">âœ“ Mark Read</button>` : ''}
      ${f.email ? `<a class="btn btn-ghost btn-sm" href="mailto:${f.email}?subject=Re: Your feedback on my portfolio">Reply âœ‰</a>` : ''}
    </div>
  `;
  if (!f.read) markRead(f.id);
  document.getElementById('fbModal').classList.remove('hidden');
}

function markRead(id) {
  const f = state.feedback.find(x => x.id == id);
  if (f) { f.read = true; saveData(); renderFeedback(); renderDashboard(); }
}

function markAllRead() {
  state.feedback.forEach(f => f.read = true); saveData(); renderFeedback(); renderDashboard(); toast('All marked read');
}

function deleteFeedback(id) {
  if (!confirm('Delete this feedback?')) return;
  state.feedback = state.feedback.filter(f => f.id != id); saveData(); renderFeedback(); renderDashboard(); toast('Deleted');
}

function clearAllFeedback() {
  if (!confirm('Clear ALL feedback? This cannot be undone.')) return;
  state.feedback = []; localStorage.removeItem(FB_KEY); saveData(); renderFeedback(); renderDashboard(); toast('Cleared');
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  SUPABASE                                                    â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateDbStatus() {
  const dot = document.getElementById('dbDot');
  const label = document.getElementById('dbLabel');
  const badge = document.getElementById('dbBadge');
  if (supabase.connected) {
    dot.classList.add('connected');
    label.textContent = 'Cloud DB Connected';
    if (badge) badge.style.display = '';
  } else {
    dot.classList.remove('connected');
    label.textContent = 'Not Connected';
    if (badge) badge.style.display = 'none';
  }
}

async function connectSupabase() {
  const url = document.getElementById('sbUrl').value.trim().replace(/\/$/, '');
  const key = document.getElementById('sbKey').value.trim();
  const status = document.getElementById('sbStatus');
  if (!url || !key) return toast('Enter both URL and key', 'err');
  status.textContent = 'â³ Testing connection...';
  status.style.color = 'var(--amber)';
  try {
    const res = await fetch(`${url}/rest/v1/feedbacks?select=count&limit=1`, {
      headers: { 'apikey': key, 'Authorization': 'Bearer ' + key }
    });
    if (!res.ok) throw new Error(`HTTP ${res.status}: ${res.statusText}`);
    supabase = { url, key, connected: true };
    localStorage.setItem(SB_KEY, JSON.stringify(supabase));
    status.textContent = 'âœ“ Connected! Supabase is working.';
    status.style.color = 'var(--green)';
    updateDbStatus();
    generateIndexCode();
    syncFeedback();
    toast('â˜ï¸ Supabase connected successfully!');
  } catch(e) {
    status.textContent = 'âœ• Connection failed: ' + e.message;
    status.style.color = 'var(--red)';
    toast('Connection failed', 'err');
  }
}

function disconnectSupabase() {
  supabase = { url:'', key:'', connected:false };
  localStorage.removeItem(SB_KEY);
  document.getElementById('sbUrl').value = '';
  document.getElementById('sbKey').value = '';
  document.getElementById('sbStatus').textContent = '';
  document.getElementById('indexCodeBlock').style.display = 'none';
  updateDbStatus();
  toast('Disconnected from Supabase');
}

function generateIndexCode() {
  if (!supabase.url) return;
  const code = `<!-- â•â• SUPABASE FEEDBACK â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Paste this BEFORE </body> in your index.html and REMOVE the old feedback script -->
<script>
const SUPABASE_URL = '${supabase.url}';
const SUPABASE_KEY = '${supabase.key}';

// â”€â”€ STAR RATING â”€â”€
let selectedRating = 0;
const stars = document.querySelectorAll('.star');
const labels = ['','Poor','Fair','Good','Great','Excellent!'];
stars.forEach(s => {
  s.addEventListener('mouseenter', () => {
    const v = +s.dataset.val;
    stars.forEach(st => {
      const sv = +st.dataset.val;
      st.style.opacity = sv <= v ? '1' : '.2';
      st.style.color = sv <= v ? '#FF6F61' : '';
      st.style.transform = sv <= v ? 'scale(1.2)' : 'scale(1)';
    });
    document.getElementById('starLabel').textContent = labels[v];
  });
  s.addEventListener('mouseleave', () => {
    stars.forEach(st => {
      const sv = +st.dataset.val;
      st.style.opacity = sv <= selectedRating ? '1' : '.3';
      st.style.color = sv <= selectedRating ? '#FF6F61' : '';
      st.style.transform = 'scale(1)';
    });
    document.getElementById('starLabel').textContent = selectedRating ? 'âœ“ ' + labels[selectedRating] : '';
  });
  s.addEventListener('click', () => {
    selectedRating = +s.dataset.val;
    document.getElementById('starLabel').textContent = 'âœ“ ' + labels[selectedRating];
    document.getElementById('starLabel').style.color = '#FF6F61';
    document.getElementById('star-error').style.display = 'none';
  });
});

async function submitFeedback() {
  const name   = document.getElementById('fb-name').value.trim();
  const email  = document.getElementById('fb-email').value.trim();
  const msg    = document.getElementById('fb-msg').value.trim();
  const status = document.getElementById('fb-status');
  document.getElementById('star-error').style.display = 'none';
  document.getElementById('name-error').style.display = 'none';
  let valid = true;
  if (!selectedRating) { document.getElementById('star-error').style.display='block'; valid=false; }
  if (!name) { document.getElementById('name-error').style.display='block'; valid=false; }
  if (!valid) return;
  status.textContent = 'â³ Sending...';
  status.style.color = 'rgba(211,211,211,0.5)';
  const entry = {
    name, email, rating: selectedRating,
    rating_label: labels[selectedRating], msg,
    date: new Date().toLocaleString('en-US',{month:'short',day:'numeric',year:'numeric',hour:'2-digit',minute:'2-digit'}),
    read: false, source: 'web'
  };
  try {
    const res = await fetch(SUPABASE_URL + '/rest/v1/feedbacks', {
      method: 'POST',
      headers: {
        'apikey': SUPABASE_KEY, 'Authorization': 'Bearer ' + SUPABASE_KEY,
        'Content-Type': 'application/json', 'Prefer': 'return=minimal'
      },
      body: JSON.stringify(entry)
    });
    if (!res.ok) throw new Error(res.statusText);
    status.innerHTML = 'âœ“ Thank you, ' + name + '! Your feedback was received.';
    status.style.color = '#4ade80';
  } catch(e) {
    // Fallback: save locally
    try {
      const local = JSON.parse(localStorage.getItem('om_feedbacks')||'[]');
      local.unshift({ ...entry, id: Date.now() });
      localStorage.setItem('om_feedbacks', JSON.stringify(local));
    } catch(_) {}
    status.innerHTML = 'âœ“ Thank you, ' + name + '! Feedback saved.';
    status.style.color = '#4ade80';
  }
  setTimeout(() => {
    document.getElementById('fb-name').value='';
    document.getElementById('fb-email').value='';
    document.getElementById('fb-msg').value='';
    selectedRating=0;
    stars.forEach(st => { st.style.opacity='.3'; st.style.color=''; st.style.transform='scale(1)'; });
    document.getElementById('starLabel').textContent='';
    status.textContent='';
  }, 3500);
}
<\/script>`;
  document.getElementById('indexCode').textContent = code;
  document.getElementById('indexCodeBlock').style.display = 'block';
}

function copySql() {
  navigator.clipboard.writeText(document.getElementById('sqlSnippet').textContent.trim())
    .then(() => toast('SQL copied!'))
    .catch(() => toast('Copy failed â€” select manually', 'err'));
}

function copyIndexCode() {
  navigator.clipboard.writeText(document.getElementById('indexCode').textContent.trim())
    .then(() => toast('Code copied! Paste it in index.html'))
    .catch(() => toast('Copy failed', 'err'));
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  SAVE SECTIONS                                               â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function saveSection(section) {
  switch(section) {
    case 'hero':
      // Read all text fields; photo is managed separately by handleHeroPhoto / applyHeroPhotoUrl
      state.hero = {
        name:     document.getElementById('heroName').value.trim(),
        sub:      document.getElementById('heroSub').value.trim(),
        location: document.getElementById('heroLocation').value.trim(),
        tagline:  document.getElementById('heroTagline').value.trim(),
        badge:    document.getElementById('heroBadge').value.trim(),
        cta1:     document.getElementById('heroCta1').value.trim(),
        cta2:     document.getElementById('heroCta2').value.trim(),
        photo:    state.hero.photo || ''  // keep existing photo, never wipe it
      };
      break;
    case 'gallery':
      break; // gallery items saved in real time
    case 'about':
      state.about = {
        p1:       document.getElementById('aboutP1').value,
        p2:       document.getElementById('aboutP2').value,
        p3:       document.getElementById('aboutP3').value,
        p4:       document.getElementById('aboutP4').value,
        skills:   document.getElementById('aboutSkills').value,
        photo:    document.getElementById('aboutPhoto').value,
        location: document.getElementById('aboutLocation').value
      };
      break;
    case 'contact':
      state.contact = {
        email:      document.getElementById('ctEmail').value,
        phone:      document.getElementById('ctPhone').value,
        insta:      document.getElementById('ctInsta').value,
        instaUrl:   document.getElementById('ctInstaUrl').value,
        linkedin:   document.getElementById('ctLinkedIn').value,
        linkedinUrl:document.getElementById('ctLinkedInUrl').value,
        github:     document.getElementById('ctGithub').value,
        city:       document.getElementById('ctCity').value
      };
      renderContact();
      break;
    case 'nownext':
      state.nownext.tags = document.getElementById('nownextTags').value;
      break;
  }
  saveData();
  toast(`${section.charAt(0).toUpperCase() + section.slice(1)} saved!`);
}

function saveAll() {
  ['hero','about','contact','nownext'].forEach(s => saveSection(s));
  toast('All changes saved âœ“');
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  EXPORT / IMPORT                                             â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function exportData() {
  const blob = new Blob([JSON.stringify(state, null, 2)], { type:'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href=url; a.download='om-portfolio-backup.json'; a.click();
  toast('Data exported as JSON');
}

function importData(e) {
  const file = e.target.files[0]; if (!file) return;
  const r = new FileReader();
  r.onload = ev => {
    try {
      state = deepMerge(state, JSON.parse(ev.target.result));
      saveData(); renderAll(); toast('Data imported!');
    } catch { toast('Invalid JSON file', 'err'); }
  };
  r.readAsText(file);
}

function resetAll() {
  if (!confirm('RESET EVERYTHING? All saved data will be deleted. This cannot be undone.')) return;
  [STORAGE_KEY, FB_KEY, SB_KEY].forEach(k => localStorage.removeItem(k));
  sessionStorage.removeItem('admin_ok');
  location.reload();
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  MODALS                                                      â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function closeModal(id) { document.getElementById(id).classList.add('hidden'); }

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  SYSTEM INFO TOGGLE                                          â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let _sysExpanded = true;
function toggleSysInfo() {
  _sysExpanded = !_sysExpanded;
  const body = document.getElementById('sysInfoBody');
  const btn = body.previousElementSibling.querySelector('button');
  body.style.display = _sysExpanded ? '' : 'none';
  btn.textContent = _sysExpanded ? 'â–¼ Collapse' : 'â–¶ Expand';
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  TOAST                                                       â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toast(msg, type = 'ok') {
  const icons = { ok:'âœ“', err:'âœ•', info:'â„¹' };
  const wrap = document.getElementById('toastWrap');
  const el = document.createElement('div');
  el.className = `toast ${type}`;
  el.innerHTML = `<span>${icons[type]||'âœ“'}</span> ${msg}`;
  wrap.appendChild(el);
  setTimeout(() => { el.style.opacity='0'; el.style.transition='opacity .3s'; setTimeout(()=>el.remove(),300); }, 3200);
}

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘  KEYBOARD SHORTCUTS                                          â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') {
    ['projectModal','learningModal','nownextModal','fbModal'].forEach(id => closeModal(id));
  }
  if ((e.ctrlKey||e.metaKey) && e.key === 's') { e.preventDefault(); saveAll(); }
});

// â•â• SCROLL TO TOP BUTTON â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.addEventListener('scroll', () => {
  const btn = document.getElementById('scrollTopBtn');
  if (btn) btn.style.display = window.scrollY > 300 ? 'flex' : 'none';
});
document.getElementById('scrollTopBtn').style.alignItems = 'center';
document.getElementById('scrollTopBtn').style.justifyContent = 'center';

// â•â• START â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
init();
</script>
</body>
</html>